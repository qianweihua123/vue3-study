{
  "version": 3,
  "sources": ["../src/nodeOps.ts", "../src/modules/attr.ts", "../src/modules/class.ts", "../src/modules/event.ts", "../src/modules/style.ts", "../src/pathProp.ts", "../../shared/src/shapeFlags.ts", "../../shared/src/index.ts", "../../reactivity/src/effect.ts", "../../reactivity/src/ref.ts", "../../reactivity/src/baseHandlers.ts", "../../reactivity/src/reactive.ts", "../../runtime-core/src/apiWatch.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/h.ts", "../../runtime-core/src/scheduler.ts", "../../reactivity/src/computed.ts", "../../runtime-core/src/componentProps.ts", "../../runtime-core/src/component.ts", "../../runtime-core/src/renderer.ts", "../src/index.ts"],
  "sourcesContent": ["/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-02 09:47:17\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-06 17:26:15\n * @FilePath: /vue3-study/packages/runtime-dom/src/nodeOps.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\n//nodeOps \u8FD9\u4E2A\u6587\u4EF6\u662F\u64CD\u4F5C dom \u7684\u4E00\u4E9B\u65B9\u6CD5\n\nexport const nodeOps = {\n    //\u521B\u5EFA\u5143\u7D20\u7684\u65B9\u6CD5\n    createElement(tageName) {\n        return document.createElement(tageName)\n    },\n    //\u79FB\u52A8\u8282\u70B9\u7684\u65B9\u6CD5 anchor\u662F\u951A\u70B9\uFF0Cparent \u662F\u7236\u8282\u70B9\n    /**\n    * @description \u63CF\u8FF0\u5728html\u4E2D\uFF0C\u5982\u679C\u9700\u8981\u52A8\u6001\u7684\u63D2\u5165\u6570\u636E\u6807\u7B7E(li\u3001a\u7B49)\uFF0C\n    * \u5219\u9700\u8981\u4F7F\u7528\u5230\u6807\u9898\u6240\u793A\u7684appendChild()\u6216insertBefore()\u6765\u5B9E\u73B0\u3002\n    * appednChild\u53EA\u80FD\u5411\u672B\u5C3E\u6DFB\u52A0\u5B50\u8282\u70B9\n    * nsertBefore() \u65B9\u6CD5\uFF1A\u53EF\u5728\u5DF2\u6709\u7684\u5B50\u8282\u70B9\u524D\u63D2\u5165\u4E00\u4E2A\u65B0\u7684\u5B50\u8282\u70B9\u3002\n    * \u8BED\u6CD5 \uFF1AinsertBefore(newchild,refchild)//\u7B2C\u4E00\u4E2A\u53C2\u6570\u662F\u65B0\u7684\u8282\u70B9\u53D8\u91CF\n    * \u5982\u679C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4E3A null \u5F80\u540E\u8FFD\u52A0\uFF0C\u5982\u679C\u6709\u503C\uFF0C\u5219\u662F\u5C06\u65B0\u7684\u8282\u70B9\u63D2\u5165\u5230\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F4D\u7F6E\u7684\u524D\u97621\n    */\n    insert(child, parent, anchor) {\n        //insertBefore\u8FD9\u4E2A\u65B9\u6CD5\u662F\u79FB\u52A8\u6027\u7684     A B C D  -> A C B  D\n        parent.insertBefore(child, anchor || null);\n    },\n    //\u79FB\u9664\u8282\u70B9\u7684\u65B9\u6CD5\uFF0C\u901A\u8FC7\u627E\u5230\u7236\u8282\u70B9\u53BB\u79FB\u9664\n    remove(child){\n        const parent =child.parentNode;\n        if(parent){\n            parent.removeChild(child)\n        }\n    },\n\n    //\u67E5\u627E\u8282\u70B9\n    querySelector(selector){\n        return document.querySelector(selector)\n    },\n\n    //\u67E5\u627E\u7236\u8282\u70B9\n    parentNode(node){\n        return node.parentNode\n    },\n\n    //\u67E5\u627E\u5144\u5F1F\u8282\u70B9\n\n    nextSibling(node){\n        return node.nextSibling\n    },\n\n    //\u8BBE\u7F6E\u6587\u672C\n    setElementText(el,text){\n        el.textContent = text\n    },\n\n    //\u521B\u5EFA\u6587\u672C\n    createText(text){\n        return document.createTextNode(text)\n    },\n\n    setText(node,text){\n        node.nodeValue = text\n    }\n}", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-02 11:43:58\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-02 11:44:04\n * @FilePath: /vue3-study/packages/runtime-dom/src/modules/attr.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\n//\u66F4\u65B0\u5C5E\u6027\n\nexport const patchAttr = (el, key, value) => {\n    if (value == null) {\n        el.removeAttribute(key);\n    } else {\n        el.setAttribute(key, value);\n    }\n}", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-02 11:01:02\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-02 11:05:45\n * @FilePath: /vue3-study/packages/runtime-dom/src/modules/class.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\n\n\nexport const patchClass = (el, value) => {\n    if (value === null) {\n        //\u5982\u679C\u7C7B\u540D\u4E3A\u7A7A\uFF0C\u79FB\u9664\u6389\u4E4B\u524D\u7684\n        el.removeAttribute('class')\n    } else {\n        el.className = value\n    }\n}", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-02 11:19:06\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-02 11:43:07\n * @FilePath: /vue3-study/packages/runtime-dom/src/modules/event.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\n\nfunction createInvoker(initialValue) {\n    //\u4F20\u5165\u7684\u662F\u65B0\u4E8B\u4EF6\u540D\u5B57\n    //\u7B2C\u4E00\u884C\u4EE3\u7801\u662F\u521B\u5EFA\u4E00\u4E2A\u7B49\u4E8E\u8BF4\u662F\u4E00\u4E2A\u6A21\u7248\u4E00\u4E2A invoker\u53D8\u91CF\n    //\u8FD9\u4E2A\u53D8\u91CF\u4E0A\u7684\u503C\u662F\u4E00\u4E2A\u51FD\u6570\uFF0C\u51FD\u6570\u5185\u90E8\u662F\u5728\u8FD9\u4E2A\u53D8\u91CF\u4E0A\u5B9A\u4E49\u4E86\u4E00\u4E2A\u5C5E\u6027\uFF0Cvalue\n    //\u4E0A\u9762\u8FD9\u4E2A\u53D8\u91CF\u4E0A\u7684 value \u503C\u5C31\u662F\u4F20\u5165\u7684\u65B0\u7684\u4E8B\u4EF6\u540D\u5B57\n    //\u6700\u540E\u8FD4\u56DE\u8FD9\u4E2A\u53D8\u91CF\uFF0C\u8FD9\u4E2A\u53D8\u91CF\u662F\u4E00\u4E2A\u51FD\u6570\uFF0C\u51FD\u6570\u5185\u90E8\u662F\u65B0\u7684\u4E8B\u4EF6\n    //invoker.value = initialValue\n    const invoker:any = (e) => invoker.value(e)\n    invoker.value = initialValue  // \u540E\u7EED\u66F4\u65B0\u7684\u65F6\u5019 \u53EA\u9700\u8981\u66F4\u65B0invoker\u7684value\u5C5E\u6027\n    return invoker\n}\nexport function patchEvent(el, key, nextValue) {\n    //el\u4E0A\u6709\u4E00\u4E2A_vel\u5C5E\u6027\uFF0C\u9ED8\u8BA4\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u7ED9\u5230\u53D8\u91CF invokers \u4E0A\n    const invokers = el._vel || (el._vel = {})\n    //\u622A\u53D6\u524D\u4E24\u4F4D\u540E\u9762\u7684\u4E8B\u4EF6\u540D\u5B57\n    const name = key.slice(2).toLowerCase()\n\n    //\u67E5\u770B\u4E4B\u524D\u662F\u5426\u6709\u7F13\u5B58\u8FC7\n    const exisitingInvoker = invokers[name]\n\n    //\u5982\u679C\u6709\u65B0\u7684\u4E8B\u4EF6\u5E76\u4E14\u6709\u7F13\u5B58\u8BF4\u660E\u662F\u66F4\u65B0\n    if (nextValue && exisitingInvoker) {\n        //\u66F4\u65B0\u4E8B\u4EF6\n        exisitingInvoker.value = nextValue\n    }else{\n        //\u65B0\u589E\u7684\u60C5\u51B5\u4E0B\n        if(nextValue){\n          //\u521B\u5EFA invoker\u5E76\u4E14\u7F13\u5B58\n          //createInvoker(nextValue)\u521B\u5EFA\u4E00\u4E2A\u51FD\u6570\u5185\u90E8\u8FD4\u56DE\u65B0\u7684\u4E8B\u4EF6\u540D\u5B57\n          const invoker = (invokers[name] = createInvoker(nextValue))\n          //\u6CE8\u518C\u65B0\u7684\u4E8B\u4EF6\n          el.addEventListener(name, invoker);\n\n        } else if(exisitingInvoker) {\n            //\u5982\u679C\u65B0\u7684\u6CA1\u6709\uFF0C\u4F46\u662F\u7F13\u5B58\u53C8\uFF0C\u90A3\u5C31\u79FB\u9664\u65F6\u95F4\uFF0C\u5E76\u4E14\u5220\u9664\u7F13\u5B58\n            el.removeEventListener(name, exisitingInvoker);\n            invokers[name] = null\n        }\n    }\n}", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-02 11:06:19\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-02 11:18:45\n * @FilePath: /vue3-study/packages/runtime-dom/src/modules/style.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nexport const patchStyle = (el: any, prev: any, next: any) => {\n    const style = el.style //style\u4E0A\u7684\u5C5E\u6027\u4F1A\u66F4\u65B0\u5728\u8FD9\u4E0A\u9762\n    for (let key in next) { //\u5FAA\u73AF\u65B0\u7684\u5C5E\u6027\n        style[key] = next[key]\n    }\n    //\u5982\u679C\u8001\u7684\u7C7B\u540D\u5728\u65B0\u7684\u4E2D\u6CA1\u6709\uFF0C\u90A3\u5C31\u53BB\u4E4B\u524D\u7684 style \u4E0A\u6E05\u9664\n    for (let key in prev) {\n        if (next[key] == null) {\n            style[key] = null\n        }\n    }\n}", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-02 10:53:28\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-03 19:05:17\n * @FilePath: /vue3-study/packages/runtime-dom/src/pathProp.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\n\nimport { patchAttr } from \"./modules/attr\";\nimport { patchClass } from \"./modules/class\";\nimport { patchEvent } from \"./modules/event\";\nimport { patchStyle } from \"./modules/style\";\n//\u6B64\u65B9\u6CD5\u662F\u7528\u6765\u5904\u7406\u5C5E\u6027\uFF0C\u4E8B\u4EF6\u7684\n\nexport const patchProp = (el, key, prevValue, nextValue) => {\n    if (key === 'class') {\n        patchClass(el, nextValue)\n    } else if (key === 'style') {\n        patchStyle(el, prevValue, nextValue);\n    } else if (/^on[^a-z]/.test(key)) {\n        patchEvent(el, key, nextValue);\n    } else {\n        patchAttr(el, key, nextValue);\n    }\n}", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-02 14:25:59\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-07 10:44:27\n * @FilePath: /vue3-study/packages/shared/src/shapeFlags.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nexport const enum ShapeFlags {\n  ELEMENT = 1, // \u865A\u62DF\u8282\u70B9\u662F\u4E00\u4E2A\u5143\u7D20 000000001\n  FUNCTIONAL_COMPONENT = 1 << 1, // \u51FD\u6570\u5F0F\u7EC4\u4EF6 000000010\n  STATEFUL_COMPONENT = 1 << 2, // \u666E\u901A\u7EC4\u4EF6 000000100\n  TEXT_CHILDREN = 1 << 3, // \u513F\u5B50\u662F\u6587\u672C\u7684\n  ARRAY_CHILDREN = 1 << 4, // \u513F\u5B50\u662F\u6570\u7EC4\n  SLOTS_CHILDREN = 1 << 5, // \u63D2\u69FD\n  TELEPORT = 1 << 6,\n  SUSPENSE = 1 << 7,\n  COMPONENT_SHOULD_KEEP_ALIVE = 1 << 8,\n  COMPONENT_KEPT_ALIVE = 1 << 9,\n  COMPONENT = ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT, //000000110\n}\n\n// console.log(ShapeFlags.COMPONENT); //\n// 000000110\n// 000000010\n\n// 000000010\n\n// \u7528\u5927\u7684\u548C\u5C0F\u7684\u505A\u4E0E\u8FD0\u7B97 > 0 \u5C31\u8BF4\u660E\u6DB5\u76D6\n// console.log(ShapeFlags.COMPONENT & ShapeFlags.FUNCTIONAL_COMPONENT);\n\n// <<   000000100\n// | \u67091\u4E2A\u662F1 \u5C31\u662F1\n// 00000100\n// 00000010\n\n// 000000110\n\n// & \u8FD0\u7B97\u5C31\u662F\u90FD\u662F1 \u624D\u662F1\n\n// COMPONENT & FUNCTIONAL_COMPONENT\n", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-10-26 14:32:28\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-06 19:40:50\n * @FilePath: /vue3-study/packages/shared/src/index.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nexport const isObject = (val) => {\n\treturn val !== null && typeof val === 'object';\n};\n\nexport function isFunction(value) {\n\treturn typeof value === \"function\";\n}\n\nexport function isString(value) {\n\treturn typeof value === \"string\";\n}\nconst ownProperty = Object.prototype.hasOwnProperty;\nexport const hasOwn = (key, value) => ownProperty.call(value, key);\n\nexport * from \"./shapeFlags\";", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-10-26 16:51:01\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-10-30 17:44:23\n * @FilePath: /vue3-study/packages/reactivity/src/effect.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nexport let activeEffect;\n\nfunction cleanupEffect(effect) {\n    //effect\u8FD9\u4E2A\u4F20\u5165\u7684\u662F\u5B9E\u4F8B\uFF0C\u5B9E\u4F8B\u4E0A\u6709\u4E2A deps \u5C5E\u6027\uFF0C\u5728\u6B64\u5904\u5220\u9664\u4F9D\u8D56\u7684\u65F6\u5019 targetMap\u91CC\u9762\u7684\u5B58\u50A8\u7684\u4E5F\u6E05\u7A7A\u4E86\uFF0C\u65AD\u70B9\u8C03\u8BD5\u53EF\u67E5\u770B\n    let { deps } = effect\n    for (let i = 0; i < deps.length; i++) {\n        deps[i].delete(effect) //\u5220\u9664\u5F53\u524D\u7684 effect\u4F9D\u8D56\n    }\n    effect.deps.length = 0 //\u5220\u9664\u540E\u4F46\u662F\u6570\u7EC4\u7684\u957F\u5EA6\u8FD8\u5728\u90A3\uFF0C\u6240\u6709\u8BBE\u7F6E\u4E3A 0\n}\nexport class ReactiveEffect {\n    // public\u5199\u6CD5\u76F8\u5F53\u4E8E this.fn = fn\n    public active = true //\u662F\u5426\u6FC0\u6D3B\n    public deps = []\n    public parent = undefined\n\n    constructor(public fn, private scheduler) {\n\n    }\n    run() {\n        if (!this.active) {\n            //\u5982\u679C\u5F53\u524D effect \u672A\u6FC0\u6D3B,\u90A3\u5C31\u53EA\u6267\u884C\u4E0B\u7528\u6237\u4F20\u5165\u7684 fn\n            return this.fn()\n        }\n        //\u6FC0\u6D3B\u72B6\u6001\u7684\u60C5\u51B5\u4E0B\n        try {\n            //this\u4EE3\u8868\u5F53\u524D\u7684 effect\uFF0C\u8D4B\u503C\u5230 activeEffect\u4E0A\n            //\u591A\u5C42 effect \u5D4C\u5957\u7684\u60C5\u51B5\u4E0B\uFF0C\u5916\u5C42 parent \u9ED8\u8BA4\u503C\u662F undefined\n            //\u5F53\u91CC\u5C42 effect \u6267\u884C\u7684\u65F6\u5019\u8FD9\u4E2A\u65F6\u5019 activeEffect\u56E0\u4E3A\u662F\u5168\u5C40\u53D8\u91CF\u5DF2\u7ECF\u6709\u503C\u4E86\uFF0C\u5916\u5C42\u7684 parent \u662F undefined,\u5185\u5C42\u7684 parent \u8FD9\u4E2A\u65F6\u5019\n            //activeEffect\u5DF2\u7ECF\u6709\u503C\u4E86\uFF0C\u6240\u4EE5\u5B83\u7684 parent\u662F\u5916\u5C42\u7684\u8FD9\u4E2A this\n            this.parent = activeEffect\n            activeEffect = this\n            //\u6BCF\u6B21 run \u7684\u65F6\u5019\u6E05\u7A7A\u6B64 effect \u4E0A\u6536\u96C6\u7684\u54EA\u4E9B\u5C5E\u6027\u5B58\u50A8\u4E86\u8FD9\u4E2A\u4F9D\u8D56\uFF0C\u5728\u8FD9\u4E00\u6E05\u695A targetmap\u4E2D\u4E5F\u6E05\u9664\u4E86\uFF0C\u6E05\u9664\u540E\u4F1A\u6267\u884C fn\uFF0C\u8FD9\u4E2A\u65F6\u5019\u53C8\u4F1A\u91CD\u65B0\u628A effect \u6536\u96C6\u8FDB\u53BB\uFF0C\u53EF\u4EE5\u65AD\u70B9\u8C03\u8BD5\n            //\u53EF\u4EE5\u770B\u4E0B\u5355\u6D4B\u4E2D\u7684\u4E8B\u4F8B\uFF0C\u5F53 flag \u6539\u53D8\u65F6\uFF0C\u53E6\u5916\u4E00\u4E2A\u53D8\u91CF\u4E0D\u7528\u4E86\uFF0C\u5982\u679C\u4E0D\u6E05\u9664\uFF0C\u90A3\u5C31\u53C8\u4F1A\u6267\u884C run \u65B9\u6CD5\uFF0C\u4F46\u662F\u8FD9\u4E2A\u65F6\u5019\u91CC\u9762\u6CA1\u6709\u7528\u5230\u8FD9\u5C5E\u6027\u4E86\n            cleanupEffect(this)\n            return this.fn()\n        } finally {\n            //\u4EE3\u7801\u6267\u884C\u5B8C\u540E\u5C06 activeEffect \u8D4B\u503C\u4E3A\u5916\u5C42\u7684 activeEffect\n            activeEffect = this.parent\n\n        }\n    }\n    stop() {\n        if (this.active) {\n            //\u8C03\u7528 stop \u65B9\u6CD5\u7684\u65F6\u5019\u53EF\u4EE5\u6E05\u7A7A\u6B64 effect \u4E0A\u7684\u4F9D\u8D56\n            cleanupEffect(this)\n            this.active = false //\u53D8\u6210\u5931\u6D3B\u72B6\u6001\n        }\n    }\n}\n\n//track\u65B9\u6CD5\u7528\u6765\u6536\u96C6\u4F9D\u8D56\nconst targetMap = new WeakMap()//key\u53EA\u80FD\u662F\u5BF9\u8C61\uFF0C\u65B9\u4FBF\u5783\u573E\u56DE\u6536\uFF0Ckey \u6D88\u9664\uFF0C\u503C\u81EA\u52A8\u56DE\u6536\nexport function track(target, key) {\n    if (!activeEffect) return;\n    //\u5148\u5C1D\u8BD5\u53BB targetMap \u4E2D\u53D6\u51FA\n    let depsMap = targetMap.get(target)\n    //\u5982\u679C\u4E0D\u5B58\u5728\u90A3\u5C31\u8BBE\u7F6E\u4E0B\n    if (!depsMap) {\n        targetMap.set(target, (depsMap = new Map()))\n    }\n    //\u5982\u679C\u80FD\u6B63\u5E38\u53D6\u51FA\uFF0C\u90A3\u5C31\u901A\u8FC7 key \u53BB\u53D6\u51FA set\u7ED3\u6784\n    let dep = depsMap.get(key)\n    //\u5982\u679C\u4E0D\u5B58\u5728\u90A3\u5C31\u8BBE\u7F6E\u8FDB\u53BB\n    if (!dep) {\n        depsMap.set(key, (dep = new Set()))\n    }\n    //\u6700\u540E\u5C06 effect \u8BBE\u7F6E\u8FDB\u5165 set \u7ED3\u6784\n    trackEffects(dep)\n\n}\n\nexport function trackEffects(dep) {\n    let shouldTrack = !dep.has(activeEffect)\n    if (shouldTrack) {\n        dep.add(activeEffect)\n        //\u8BB0\u5F55\u54EA\u4E9B\u5C5E\u6027\u5B58\u50A8\u4E86\u6B64 activeEffect\n        activeEffect.deps.push(dep) // \u540E\u7EED\u9700\u8981\u901A\u8FC7effect\u6765\u6E05\u7406\u7684\u65F6\u5019\u53EF\u4EE5\u53BB\u4F7F\u7528\n    }\n}\n\nexport function trigger(target, key, newValue, oldValue) {\n    //reactive\u8FC7\u7684\u6570\u636E\u5DF2\u7ECF\u5B58\u50A8\u8FC7\u5230 weakMap \u7ED3\u6784\n    let depsMap = targetMap.get(target)\n    //\u672A\u8BB0\u5F55\u8FC7\u7684\u76F4\u63A5 return\n    if (!depsMap) {\n        return\n    }\n    //\u5728 map \u7ED3\u6784\u4E2D\u6839\u636E\u5C5E\u6027 key \u540D\uFF0C\u53D6\u51FA dep\uFF0Cdep \u662F\u4E00\u4E2A set \u7ED3\u6784\uFF0C\u5B58\u50A8 effect\n    let dep = depsMap.get(key)\n    if (dep) {\n        //\u5C06 dep\u62FF\u4E00\u4EFD\u51FA\u6765\u53BB\u5FAA\u73AF\u6267\u884C run \u65B9\u6CD5\uFF0C\u5BF9\u6BD4 effects\u548C dep \u662Ffalse\u4E0D\u76F8\u7B49\u7684\uFF0C\u72EC\u7ACB\u7684\n        triggerEffects(dep)\n    }\n\n\n}\n\nexport function triggerEffects(dep) {\n    // if(!dep.length) return\n    if (dep) {\n        const effects = [...dep]\n        effects.forEach(effect => {\n            // \u5F53\u6211\u91CD\u65B0\u6267\u884C\u6B64effect\u65F6\uFF0C\u4F1A\u5C06\u5F53\u524D\u7684effect\u653E\u5230\u5168\u5C40\u4E0A activeEffect,\u9632\u6B62\u591A\u6B21\u6267\u884C\u6B64effct\n            //\u5982\u679C\u4E0A\u4E00\u4E2A\u8FD8\u6CA1\u6709\u6267\u884C\u5B8C\u8FD9\u4E2A\u65F6\u5019activeEffect\u548C\u4E0B\u4E00\u4E2A\u4E00\u6837\uFF0C\u5C31\u4E0D\u7528\u91CD\u590D\u6267\u884C\u4E86\n            if (activeEffect != effect) {\n                if (!effect.scheduler) {\n                    effect.run()\n                } else {\n                    effect.scheduler();\n                }\n            }\n        });\n    }\n}\nexport function effect(fn, options: any = {}) {\n    // effect\u5185\u90E8\u4F7F\u7528\u4E86 es6 \u7684\u7C7B\u6765\u5B9E\u73B0\n    const _effect = new ReactiveEffect(fn, options.scheduler)\n    //\u4E00\u8FDB\u5165\u7A0B\u5E8F\u9ED8\u8BA4\u6267\u884C\u4E00\u6B21\u4F20\u5165\u7684\u53C2\u6570 fn\n    _effect.run()\n    //\u6B64\u51FD\u6570\u8FD8\u9700\u8981\u8FD4\u56DE\u7528\u6237\u4F20\u5165\u7684\u51FD\u6570\uFF0C\u8C03\u7528\u53EF\u4EE5\u6267\u884C\uFF0C\u8D77\u59CB\u5C31\u662F\u8FD4\u56DE run \u65B9\u6CD5\n    const runner = _effect.run.bind(_effect)\n    //\u5E76\u5C06\u6B64 effect \u653E\u5230 runner \u4E0A\n    runner.effect = _effect\n    return runner\n}\n", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-10-30 11:52:31\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-09 16:59:34\n * @FilePath: /vue3-study/packages/reactivity/src/ref.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nimport { isObject } from \"@vue/shared\";\nimport { activeEffect, trackEffects, trigger, triggerEffects } from \"./effect\";\nimport { reactive } from \"./reactive\";\n//ref\u5185\u90E8\u5B9E\u73B0\u4F7F\u7528\u4E86 es6 \u7684\u7C7B\nexport function ref(value) {\n    return new RefImpl(value)\n}\nfunction toReactive(value) {\n    return isObject(value) ? reactive(value) : value\n}\nclass RefImpl {\n    dep = undefined; //\u7528\u6765\u6536\u96C6 effect\n    _value; //\u7528\u6765\u4FDD\u5B58\u8FD4\u56DE\u503C\n    _v_isRef = true;//\u7528\u6765\u8868\u793A\u6B64\u5C5E\u6027\u5DF2\u7ECF\u88AB ref \u8FC7\uFF0C\u662F\u4E00\u4E2A\u6807\u8BC6\n    constructor(public rawValue) {\n        //\u5982\u679C\u4F20\u5165\u5BF9\u8C61\u8C03\u7528 reactive\u8FD4\u56DE proxy \u5BF9\u8C61\uFF0C\u6216\u8005\u8FD4\u56DE\u539F\u6570\u636E\n        this._value = toReactive(rawValue)\n    }\n\n    get value() { //get\u5C5E\u6027\u8BBF\u95EE\u5668\n        if (activeEffect) { //\u5B58\u5728 activeEffect\u7684\u8BDD\u53BB\u4F9D\u8D56\u6536\u96C6\n            trackEffects(this.dep || (this.dep = new Set()))\n        }\n        return this._value\n    }\n\n    set value(newValue) {\n        //\u5982\u679C\u65B0\u8001\u503C\u4E0D\u4E00\u6837\n        if (newValue !== this.rawValue) {\n            //\u5224\u65AD\u65B0\u8BBE\u7F6E\u7684\u503C\u662F\u5426\u662F\u5BF9\u8C61\uFF0C\u662F\u7684\u8BDD\u8FD4\u56DE proxy \u5BF9\u8C61\uFF0C\u6216\u8005\u8FD4\u56DE\u65B0\u503C\n            this._value = toReactive(newValue)\n            this.rawValue = newValue//\u5C06\u65B0\u503C\u53D8\u4E3A\u8001\u503C\n            triggerEffects(this.dep)\n        }\n    }\n}\n\nclass ObjectRefImpl {\n    _v_isRef = true;\n    constructor(public _object, public _key) {\n\n    }\n    get value() {\n        return this._object[this._key]\n    }\n    set value(newValue) {\n        this._object[this._key] = newValue\n    }\n}\n\n//\u5C06\u5355\u4E2A\u7684\u5C5E\u6027\u8F6C\u4E3A\u54CD\u5E94\u5F0F\u5BF9\u8C61\nexport function toRef(target, key) {\n    return new ObjectRefImpl(target, key)\n}\n\nexport function toRefs(object) {\n    const ret = {}\n    for (let key in object) {\n        ret[key] = toRef(object, key)\n    }\n\n    return ret\n}\n\n//\u5C06 torefs \u540E\u7684\u5BF9\u8C61 \u8F6C\u6362\u4E00\u4E0Bref\u7C7B\u578B\uFF0C\u7701\u53BB\u4E86 .value \u7E41\u7410\u64CD\u4F5C\u3002\nexport function isRef(ref) {\n    return !!(ref && ref._v_isRef)\n}\n\nexport function unRef(ref) {\n    return isRef(ref) ? ref.value : ref\n}\n\nexport function proxyRefs(objectWithRefs) {\n    //\u5185\u90E8\u53BBnew proxy\u53BB\u62E6\u622A\u8FD9\u4E2A\u5BF9\u8C61\n    return new Proxy(objectWithRefs, {\n        get(target, key) {\n            return unRef(Reflect.get(target, key))\n        },\n        set(target, key, value) {\n            if (isRef(target[key]) && !isRef(value)) {\n                //\u5982\u679C\u539F\u6570\u636E\u662Fref,\u65B0\u503C\u4E0D\u662Fref,\u90A3\u5C31\u662F\u76F4\u63A5\u8BBE\u7F6Eref\u7684value\n                return target[key].value = value\n\n            } else {\n                // \u5982\u679C\u662Fref\u66FF\u6362ref\u76F4\u63A5\u66FF\u6362\n                return Reflect.set(target, key, value)\n            }\n        }\n    })\n}", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-10-26 15:05:11\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-09 16:37:52\n * @FilePath: /vue3-study/packages/reactivity/src/baseHandlers.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nimport { reactive, ReactiveFlags } from \"./reactive\";\nimport { track, trigger } from \"./effect\";\nimport { isRef } from \"./ref\";\nimport { isObject } from \"@vue/shared\";\nexport const mutableHandlers = {\n    // reflect \u7684 \u4F18\u52BF\uFF0C\u5185\u7F6E\u5BF9\u8C61\uFF0C\u4EE5\u53CA\u5B83\u7684 api \u548C proxy \u662F\u4E00\u4E00\u5BF9\u5E94\u7684\uFF0C\u6839\u636E\u4E0B\u53D1\u7684\u4F8B\u5B50\uFF0C\u53EF\u4EE5\u770B\u51FA\u901A\u8FC7\u53CD\u5C04\u7684\u65B9\u5F0F\u53EF\u4EE5\u62E6\u622A\u5230\u5185\u90E8\u7684\u4E24\u6B21\u89E6\u53D1\uFF0C\u5982\u679C\u662F target[key]\u662F\u53EA\u80FD\u62E6\u622A\u5230\u5916\u5C42\u7684\u8BBF\u95EE\n\n    /**\n    * let person = {\n    name: 'jw',\n    get aliasName() { // this = person\n        return '**' + this.name + '**'\n     }\n    }\n\n    let proxy = new Proxy(person, {\n       get(target, key, receiver) {\n          console.log(key)\n          return Reflect.get(target, key, receiver); // person.alianame\n        },\n       set(target, key, value, receiver) {\n\n        return Reflect.set(target, key, value, receiver);;\n       },\n      })\n     // \u8FD9\u6837\u6211\u4EEC\u53EA\u76D1\u63A7\u5230\u4E86aliasName \u7684\u53D6\u503C  name\u7684\u53D6\u503C\u64CD\u4F5C\u76D1\u63A7\u4E0D\u5230\n      console.log(proxy.aliasName); // \u53D6aliasName\u7684\u65F6\u5019 \u89E6\u53D1\u4E86\u83B7\u53D6 name\u7684\u64CD\u4F5C  2\n    *\n    *\n    */\n\n    // \u6709\u4E09\u4E2A\u53C2\u6570\uFF0C\u76EE\u6807 target\u5BF9\u8C61,key\u5C5E\u6027\u540D\uFF0Creceiver\u6307\u5411  \u5F53\u524D\u7684proxy\u5BF9\u8C61\n    get(target, key, receiver) {\n        if (ReactiveFlags.IS_REACTIVE == key) {\n            return true;\n        }\n        track(target, key)\n        let r = Reflect.get(target, key, receiver)\n        if (isRef(r)) {\n            return r.value;\n        }\n        if (isObject(r)) {\n            // \u53EA\u6709\u7528\u6237\u53D6\u503C\u7684\u65F6\u5019 \u624D\u4F1A\u8FDB\u884C\u4E8C\u6B21\u4EE3\u7406\uFF0C\u4E0D\u7528\u62C5\u5FC3\u6027\u80FD\n            return reactive(r);\n        }\n        return r;\n    },\n    set(target, key, value, receiver) {\n        debugger\n        //\u53D6\u51FA\u65E7\u7684\u503C\n        let oldValue = target[key]\n        let result = Reflect.set(target, key, value, receiver)\n        if (oldValue != value) {\n            //\u65B0\u8001\u503C\u4E0D\u76F8\u540C\u7684\u60C5\u51B5\u4E0B,\u6267\u884C trigger \u89E6\u53D1\u66F4\u65B0\n            trigger(target, key, value, oldValue)\n        }\n        return result\n    }\n}", "\n/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-10-26 14:58:21\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-10-29 09:48:21\n * @FilePath: /vue3-study/packages/reactivity/src/reactive.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\n//\u6211\u4EEC\u5B9A\u4E49\u5728 shared \u6587\u4EF6\u5939\u4E0B\u7684\u5DE5\u5177\u51FD\u6570\u65B9\u6CD5\nimport { isObject } from '@vue/shared';\nimport { mutableHandlers } from './baseHandlers';\n\n//ts \u7684\u679A\u4E3E\u7ED9\u610F\u89C1 proxy \u8FC7\u7684\u5BF9\u8C61\u52A0\u4E2A\u6807\u8BC6\nexport const enum ReactiveFlags {\n    IS_REACTIVE = \"__v_isReactive\",\n}\n\nexport function isReactive(target) {\n    return !!(target && target[ReactiveFlags.IS_REACTIVE]);\n  }\n\n//WeakMap key \u53EA\u80FD\u662F\u5BF9\u8C61\uFF0C\u5E76\u4E14 key \u6E05\u7A7A\uFF0C\u503C\u7684\u5F15\u7528\u4E5F\u6E05\u695A\uFF0C\u5229\u7528\u5783\u573E\u56DE\u6536\nconst reactiveMap = new WeakMap();\n\nexport function reactive(target) {\n    /**\n    *  \u5982\u679C\u4F20\u5165\u7684\u4E0D\u662F\u5BF9\u8C61\u7684\u8BDD\uFF0C\u76F4\u63A5\u4E0D\u5F80\u4E0B\u6267\u884C\u4E86\n    */\n    if (!isObject(target)) {\n        return target;\n    }\n    //\u76F8\u5F53\u4E8E\u6211\u5728\u8FD9\u91CC\u5F3A\u884C\u7ED9\u8FD9\u4E2A\u5BF9\u8C61\u52A0\u4E86\u4E2A\u8BBF\u95EE\u64CD\u4F5C\uFF0C\u89E6\u53D1\u4E86 get\uFF0C\u5982\u679C\u8BBF\u95EE\u7684\u5C5E\u6027\u540D\u662F\u6211\u4EEC\u5B9A\u4E49\u7684\uFF0C\u8BF4\u660E\u5DF2\u7ECF\u4EE3\u7406\u8FC7\n    if(target[ReactiveFlags.IS_REACTIVE]){\n        return target\n    }\n\n    //\u67E5\u770B\u662F\u5426\u5B58\u50A8\u8FC7\uFF0C\u5B58\u50A8\u8FC7\u76F4\u63A5\u8FD4\u56DE\u4E4B\u524D\u7684\u7ED3\u679C\n    const exisitsProxy = reactiveMap.get(target);\n\n    if (exisitsProxy) {\n      return exisitsProxy;\n    }\n    /**\n    * \u5185\u90E8\u662F\u901A\u8FC7 proxy \u5B9E\u73B0\u7684\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u6211\u4EEC\u62BD\u79BB\u51FA\u53BB\n    */\n   const proxy = new Proxy(target,mutableHandlers);\n\n   //\u5982\u679C\u6CA1\u6709\u5B58\u50A8\u8FC7\uFF0C\u90A3\u5C31\u8BBE\u7F6E\u8FDB\u53BB\n   reactiveMap.set(target, proxy);\n\n   return proxy\n}", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-10-29 09:21:20\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-03 19:03:32\n * @FilePath: /vue3-study/packages/runtime-core/src/apiWatch.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nimport { isFunction, isObject } from \"@vue/shared\";\nimport { isReactive } from '../../reactivity/src/reactive'\nimport { ReactiveEffect } from \"../../reactivity/src/effect\";\n//\u7B2C\u4E00\u4E2A\u53C2\u6570\u89C2\u5BDF\u7684\u6E90\uFF0C\u7B2C\u4E8C\u4E2A\u56DE\u8C03\u51FD\u6570\uFF0C\u4E09\u662F\u914D\u7F6E\u7684\u9009\u9879\nexport function watch(source, cb, options?) {\n    return doWatch(source, cb, options)\n}\n\n//\u8FD9\u7684 effect \u76F8\u5F53\u4E8E watch \u91CC\u9762\u7684 source\uFF0C\u662F\u4E00\u4E2A\u51FD\u6570\uFF0C\u7528\u4E8E\u91CD\u65B0\u8BA1\u7B97\uFF0Coptions\u662F\u914D\u7F6E\u9879\nexport function watchEffect(effect, options?) {\n    //\u6B64\u65B9\u6CD5\u6CA1\u6709\u56DE\u8C03\u51FD\u6570\n    doWatch(effect, null, options);\n}\n\nfunction traverse(source, s = new Set()) {\n    if (!isObject(source)) {\n        return source\n    }\n    if (s.has(source)) { //\u91C7\u7528 set \u7ED3\u6784\u6765\u5B58\u50A8\n        return source\n    }\n    s.add(source) //\u5B58\u50A8\u8FDB\u53BB\n    for (let key in source) {\n        traverse(source[key], s) //\u9012\u5F52\u53D6\u503C\uFF0C\u4E00\u65E6\u8BBF\u95EE\u5C31\u4F1A\u6536\u96C6 effect\n    }\n\n    return source\n}\nfunction doWatch(source, cb, options) {\n    let getter //\u7A0D\u5FAE\u4F1A\u4F20\u5165 effect\u7C7B \u4E2D\u4F5C\u4E3A\u7B2C\u4E00\u4E2A\u51FD\u6570\uFF0C\n    if (isReactive(source)) { //\u662F\u4EE3\u7406\u540E\u7684\u5BF9\u8C61\u7684\u60C5\u51B5\u4E0B\n        getter = () => traverse(source)\n    } else if (isFunction(source)) { //\u5982\u679C\u662F\u51FD\u6570\uFF0C\u8D4B\u503C\u5230 getter\n        getter = source\n    }\n\n    let oldValue;//\u7528\u4E8E\u5B58\u50A8\u8001\u503C\n    let cleanup;\n    //\u7528\u6237\u5982\u679C\u4F7F\u7528 onCleanup \u4F1A\u4F20\u5165\u4E00\u4E2A\u51FD\u6570 \uFF0C\u7528\u6237\u5728\u5916\u90E8\u4E00\u65E6\u8C03\u7528\u8FD9\u4E2A\u51FD\u6570\u90A3\u5C31\u597D\u8BB2\u7528\u6237\u4F20\u5165\n    //\u7684\u51FD\u6570\u8D4B\u503C\u5230\u5185\u90E8\u7684 cleanup \u4E0A\uFF0C\u8FD9\u4E0A\u9762\u5C31\u6709\u503C\u4E86\n    //onCleanup\u662F\u6E90\u7801\u4E2D\u5B9A\u4E49\u7684\u4E00\u4E2A\u51FD\u6570\uFF0C\u653E\u5230\u4E86 cb \u7684\u7B2C\u4E09\u4E2A\u53C2\u6570\u4E0A\u9762\n    //\u4E00\u65E6\u6267\u884C\u5C06\u7528\u6237\u4F20\u5165\u7684\u51FD\u6570\u653E\u5230 cleanup\u53D8\u91CF\u4E0A\u4E86\n    const onCleanup = (userCb) => {\n        cleanup = userCb;\n    }\n    //\u5B9A\u4E49\u8C03\u5EA6\u51FD\u6570\n    const job = () => {\n        if (cb) {\n            let newValue = effect.run() //return \u6267\u884C\u7684\u662F getter\n            //\u7B2C\u4E00\u6B21\u6267\u884C\u7684\u65F6\u5019\u8FD9\u4E2A\u503C cleanup \u662F\u7A7A\u7684\uFF0C\u56E0\u4E3A\u8FD8\u6CA1\u6267\u884C cb\uFF0Ccb \u91CC\u9762\u624D\u4F1A\u8D4B\u503C\n            //\u5982\u679C watch \u89C2\u6D4B\u7684\u53D8\u91CF\u8FDE\u7EED\u6539\uFF0C\u90A3\u4E48\u7B2C\u4E8C\u6B21\u6267\u884C\u7684 cb\u7684\u67D0\u6BB5\u4F9D\u8D56\u4F20\u5165\u53D8\u91CF\u7684\u7A0B\u5E8F \u4F1A\u88AB\u5C4F\u853D\u6389\uFF0C\u56E0\u4E3A\u8FD9\u4E2A\u65F6\u5019 cleanup \u5DF2\u7ECF\u6709\u503C\u4E86\n            //\u56E0\u4E3A\u5229\u7528\u4E86\u95ED\u5305\uFF0C\u6240\u4EE5\u7B2C\u4E00\u6B21\u6267\u884C cb \u4FDD\u5B58\u4E86\u7B2C\u4E00\u6B21\u7684 flag\uFF0C\u7B2C\u4E8C\u6B21\u6267\u884C\u56DE\u8C03\u7684\u65F6\u5019\u6709\u503C\uFF08\u8FD9\u4E2A\u503C\u662F\u7B2C\u4E00\u6B21\u7684 \u5305\u542Bflag\u7684\u51FD\u6570\uFF09\n            //\u5C06\u8FD9\u4E2A flag \u6539 false\uFF0C\u7B49\u5230\u7B2C\u4E00\u6B21\u7684\u5F02\u6B65\u51FD\u6570\u6267\u884C\u5B8C\uFF0C\u518D\u6267\u884C flag \u6807\u8BC6\u4E0B\u9762\u7A0B\u5E8F\u7684\u65F6\u5019\u5DF2\u7ECF\u6539\u5B8C flag\uFF0C\u5DF2\u7ECF\u5C4F\u853D\u6389\u4E86\n            if (cleanup) cleanup();\n            //\u7528\u6237\u4F20\u5165\u7684\u56DE\u8C03\u51FD\u6570\u5982\u679C\u4F20\u5165\u4E86\u4E09\u4E2A\u53C2\u6570\uFF0C\u8BF4\u660E\u7B2C\u4E09\u4E2A\u5BF9\u5E94 oncleanup\n            cb(newValue, oldValue, onCleanup) //\u8C03\u7528\u56DE\u8C03\u51FD\u6570\u4F20\u5165\u65B0\u503C\u548C\u8001\u503C\n            //\u7136\u540E\u5C06\u65B0\u503C\u8D4B\u503C\u5230\u8001\u503C\u4E0A\n            oldValue = newValue\n        } else {\n            //\u6CA1\u6709\u56DE\u8C03\u7684\u60C5\u51B5\u4E0B\uFF0C\u76F4\u63A5\u6267\u884C getterc\n            effect.run()\n        }\n    }\n    //getter\u662F fn\uFF0Cjob \u662F schedluer \u56DE\u8C03\u51FD\u6570\n    const effect = new ReactiveEffect(getter, job)\n    //\u5982\u679C\u914D\u7F6E\u4E86 immediate \u90A3\u5C31\u7ACB\u5373\u6267\u884C\n    if (options?.immediate) {\n        return job()\n    }\n\n    oldValue = effect.run()//\u8D4B\u503C\u8001\u503C\n\n}", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-02 14:21:53\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-10 10:44:16\n * @FilePath: /vue3-study/packages/runtime-core/src/vnode.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nimport { isObject, isString, ShapeFlags } from \"@vue/shared\";\n//\u7533\u660E text \u7C7B\u578B\nexport const Text = Symbol(\"text\");\nexport const Fragment = Symbol(\"fragment\"); //\u6587\u6863\u788E\u7247\n\nexport function isVNode(vnode) {\n    return vnode.__v_isVnode == true;\n}\n\nexport function isSameVNode(n1, n2) {\n    return n1.type === n2.type && n1.key === n2.key;\n}\n\n//type\u5176\u5B9E\u5C31\u662F\u6807\u7B7E\u540D\nexport function createVNode(type, props = null, children = null) {\n    // \u7EC4\u4EF6\n    // \u5143\u7D20\n    // \u6587\u672C\n    // \u81EA\u5B9A\u4E49\u7684keep-alive..\n    // \u7528\u6807\u8BC6\u6765\u533A\u5206 \u5BF9\u5E94\u7684\u865A\u62DF\u8282\u70B9\u7C7B\u578B \uFF0C \u8FD9\u4E2A\u8868\u793A\u91C7\u7528\u7684\u662F\u4F4D\u8FD0\u7B97\u7684\u65B9\u5F0F \u53EF\u4EE5\u65B9\u4FBF\u7EC4\u5408\n    const shapeFlag = isString(type)\n        ? ShapeFlags.ELEMENT\n        : isObject(type)\n            ? ShapeFlags.COMPONENT\n            : 0;\n    // \u865A\u62DF\u8282\u70B9\u8981\u5BF9\u5E94\u771F\u5B9E\u8282\u70B9\n    const vnode = {\n        __v_isVnode: true, // \u6DFB\u52A0\u6807\u8BC6\u662F\u4E0D\u662Fvnode\n        type,\n        props,\n        children,\n        shapeFlag,\n        key: props?.key,\n        el: null, // \u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9\n    };\n    if (children) {\n        let type = 0\n        if (Array.isArray(children)) {\n            // [vnode\uFF0C'\u6587\u672C']\n            type = ShapeFlags?.ARRAY_CHILDREN\n        }else if(isObject(children)){\n            type = ShapeFlags.SLOTS_CHILDREN; // \u5B69\u5B50\u662F\u63D2\u69FD\n        } else {\n            // \u6587\u672C\n            type = ShapeFlags.TEXT_CHILDREN;\n        }\n\n        vnode.shapeFlag |= type;\n    }\n    return vnode; // \u6839\u636E  vnode.shapeFlag  \u6765\u5224\u65AD\u81EA\u5DF1\u7684\u7C7B\u578B\u548C\u5B69\u5B50\u7684\u7C7B\u578B\n}", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-02 16:16:50\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-09 16:16:23\n * @FilePath: /vue3-study/packages/runtime-core/src/h.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\n// \u63D0\u4F9B\u591A\u6837\u7684api \u6839\u636E\u53C2\u6570\u6765\u533A\u5206\n\nimport { isObject } from \"@vue/shared\";\nimport { createVNode, isVNode } from \"./vnode\";\n\nexport function h(type, propsOrChildren?, children?) {\n    //h \u7684\u4F20\u53C2\u662F\u591A\u79CD\u591A\u6837\u7684\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5224\u65AD\u53C2\u6570\u7684\u957F\u5EA6\n    const l = arguments.length\n    // h(type,{})   h(type,h('span')) => h(type,[h('span')])\n    //  h(type,[])   h(type,'\u6587\u672C')\n    if (l == 2) { // \u53EA\u6709\u5C5E\u6027\uFF0C\u6216\u8005\u4E00\u4E2A\u5143\u7D20\u513F\u5B50\u7684\u65F6\u5019\n        //\u5982\u679C\u957F\u5EA6\u4E3A 2 \u7684\u8BDD\u6709\u4E0A\u9762\u8FD9\u51E0\u79CD\u60C5\u51B5\n        if (isObject(propsOrChildren) && !Array.isArray(propsOrChildren)) {\n            //\u5982\u679C\u662F\u5BF9\u8C61\u5E76\u4E14\u4E0D\u662F\u6570\u7EC4 h(type,{})\n            if (isVNode(propsOrChildren)) {\n                return createVNode(type, null, [propsOrChildren]);\n            }\n            return createVNode(type, propsOrChildren);\n        } else {\n            // \u6570\u7EC4 \u6216\u8005\u6587\u672C\n            return createVNode(type, null, propsOrChildren);\n        }\n    } else {\n        if (l > 3) {\n            children = Array.from(arguments).slice(2);\n            // h('div',{},'a','b','c') \u8FD9\u6837\u64CD\u4F5C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u5FC5\u987B\u662F\u5C5E\u6027 h('div','e','a','b','c')\n\n            // h('div',{},h('span')) => h('div',{},[h('span')])\n        } else if (l === 3 && isVNode(children)) {\n            children = [children];\n        }\n        return createVNode(type, propsOrChildren, children);\n    }\n}", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-06 20:54:48\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-06 21:09:23\n * @FilePath: /vue3-study/packages/runtime-core/src/scheduler.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nconst queue = []; //\u7EF4\u62A4\u4E00\u4E2A\u961F\u5217\u51FD\u6570\u5185\u90E8\nlet isFlushing = false; //\u4E00\u4E2A\u5F00\u5173\n\nconst resolvePromise = Promise.resolve(); // nextTick \u4FDD\u5B58\u4E86\u4E0B promise \u7684 resolve \u65B9\u6CD5\n\nexport const queueJob = (job:any) => {\n    //job \u53C2\u6570\u5C31\u662Finstance.update\u65B9\u6CD5\uFF0C\u8FD9\u4E2A\u65B9\u6CD5\u5C31\u662F  effect.run \u65B9\u6CD5\n    //\u5C06\u8FD9\u4E2A\u65B9\u6CD5\u6536\u96C6\u5230\u4E00\u4E2A\u6570\u7EC4\u4E2D\uFF0C\u8FC7\u6EE4\u6389\u91CD\u590D\u7684\n  if (!queue.includes(job)) {\n    queue.push(job);\n  }\n\n  // \u6700\u7EC8\u6211\u8981\u6E05\u7A7A\u961F\u5217\n  //\u540C\u6B65\u6267\u884C\u5B8C\u540E\uFF0C\u624D\u4F1A\u6267\u884C\u5FAE\u4EFB\u52A1\uFF0C\u591A\u6B21\u540C\u6B65\u7684\u65F6\u5019\u5DF2\u7ECF\u5C06\u66F4\u65B0\u65B9\u6CD5\u7EF4\u62A4\u5230\u6570\u7EC4\uFF0C\u5982\u679C\u5F00\u53D1\u662F\u5173\u95ED\u72B6\u6001\uFF0C\u5C31\u5F00\u542F\u53BB\u6267\u884C\u5FAE\u4EFB\u52A1\n  if (!isFlushing) {\n    isFlushing = true;\n\n    // \u7B49\u5F85\u6570\u636E\u5168\u90E8\u4FEE\u6539\u540E \u505A\u4E00\u6B21\u64CD\u4F5C //\u8FD9\u91CC\u9762\u8BF4\u7684\u6570\u636E\u5168\u90E8\u4FEE\u6539\u5C31\u662F\u591A\u6B21\u6539\u53D8\u6570\u636E\u89E6\u53D1\u4E86 effect\u7684 scheduler,\u591A\u6B21\u5728\u5916\u90E8\u7EF4\u62A4\u5230\u4E86 queue \u961F\u5217\n    resolvePromise.then(() => {\n      isFlushing = false; //\u7B49\u5230\u5FAE\u4EFB\u52A1\u6210\u529F\u7684\u65F6\u5019\u518D\u6253\u5F00\u5F00\u5173\uFF0C\u6E05\u7A7A queue\u6570\u7EC4\u524D\uFF0C\u590D\u5236\u4E00\u4EFD\uFF0C\u53BB\u6267\u884C\u961F\u5217\u91CC\u9762\u7684 instance.update\u65B9\u6CD5\n      let copy = queue.slice(0);\n      queue.length = 0;\n\n      for (let i = 0; i < copy.length; i++) {\n        const job = copy[i];\n        job();\n      }\n    });\n  }\n};\n\n// \u6279\u5904\u7406  \u5F00\u4E86\u4E00\u4E2Apromiose    queue =\u300B \u3010job,job,job]\n", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-10-28 20:52:10\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-08 11:35:55\n * @FilePath: /vue3-study/packages/reactivity/src/computed.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nimport { isFunction } from \"@vue/shared\";\nimport {\n    activeEffect,\n    ReactiveEffect,\n    track,\n    trackEffects,\n    triggerEffects,\n} from \"./effect\";\n\nclass ComputedRefImpl {\n    public dep = undefined; //\n    public effect = undefined;//\u8BA1\u7B97\u5C5E\u6027 effect\n    public _v_isRef = true //\u8FD9\u4E2A\u5C5E\u6027 \u9700\u8981\u7528.value\u6765\u53D6\u503C\n    public _dirty = true //\u6570\u636E\u7F13\u5B58\u7684\u5F00\u5173\n    public _value; //\u7F13\u5B58\u7684\u7ED3\u679C\u503C\n    constructor(getter, public setter) {\n        //new\u8FD9\u4E2A\u7C7B\u7684\u65F6\u5019\uFF0C\u521D\u59CB\u5316\u51FD\u6570\u6267\u884C\u3001\u521D\u59CB\u5316\u7684\u65F6\u5019\u521B\u5EFA\u4E00\u4E2A effect\n        //\u7B2C\u4E00\u4E2A\u53C2\u6570\u76F8\u5F53\u4E8E\u6211\u4EEC\u4F7F\u7528 effect\u65F6\u5019\u4F20\u5165\u7684\u7528\u6237\u51FD\u6570\uFF0C\u7B2C\u4E8C\u4E2A\u662F\u5C5E\u4E8E scheduler\n        /**\n        * @description \u63CF\u8FF0\nexport class ReactiveEffect {\n    // public\u5199\u6CD5\u76F8\u5F53\u4E8E this.fn = fn\n    public active = true //\u662F\u5426\u6FC0\u6D3B\n    public deps = []\n    public parent = undefined\n\n    constructor(public fn, private scheduler) {\n\n        */\n        this.effect = new ReactiveEffect(getter, () => {\n           //\u8FD9\u4E2A\u51FD\u6570\uFF0C\u5728\u5185\u90E8\u4F9D\u8D56\u7684\u5C5E\u6027\u6539\u53D8\u65F6\u5019\uFF0C\u89E6\u53D1 trigger \u7684\u65F6\u5019\n           //\u56E0\u4E3A\u6536\u96C6\u4E86\u5F53\u524D\u7684\u8BA1\u7B97\u5C5E\u6027 effect\uFF0C\u6267\u884C effect.run\u7684\u65B9\u6CD5\u65F6\u5019\n           //\u6709 scheduler\u4F1A\u6267\u884C\u8FD9\u513F\uFF0C\u5C31\u4F1A\u91CD\u7F6E\u5F00\u5173\uFF0C\u5982\u679C\u4E00\u65E6\u53D6\u503C\u5C31\u4F1A\u91CD\u65B0\u8BA1\u7B97\n           this._dirty = true;\n           //\u5982\u679C\u5728 effect \u4E2D\u4F7F\u7528\u4E86\uFF0C\u8FD8\u5F97\u901A\u77E5\u8FD9\u91CC\u9762\u7684 effec \u53BB\u66F4\u65B0\n           triggerEffects(this.dep || (this.dep = new Set()));\n        })\n    }\n\n    get value() {\n        //\u4F7F\u7528\u8FD9\u4E2A\u8BA1\u7B97\u5C5E\u6027\u7684\u65F6\u5019\u89E6\u53D1 get\uFF0C\u53BB\u6536\u96C6 effect\n        // \u5982\u679C\u6709activeEffect \u610F\u5473\u7740\u8FD9\u4E2A\u8BA1\u7B97\u5C5E\u6027\u5728effct\u4E2D\u4F7F\u7528\n        // \u9700\u8981\u8BA9\u8BA1\u7B97\u5C5E\u6027\u6536\u96C6\u8FD9\u4E2Aeffect\n        // \u7528\u6237\u53D6\u503C\u53D1\u751F\u4F9D\u8D56\u6536\u96C6\n        if (activeEffect) {\n            //\u8C03\u7528 trakc \u65B9\u6CD5\uFF0C\u6B64\u65B9\u6CD5\u4E2D\u7ED9\u5F53\u524D\u8FD9\u4E2A\u8BA1\u7B97\u5C5E\u6027\u4E0A\u7684 dep \u5C5E\u6027\u6536\u96C6\u4E86 effect\n            /**\n             export function trackEffects(dep) {\n    let shouldTrack = !dep.has(activeEffect)\n    if (shouldTrack) {\n        dep.add(activeEffect)\n        //\u8BB0\u5F55\u54EA\u4E9B\u5C5E\u6027\u5B58\u50A8\u4E86\u6B64 activeEffect\n        activeEffect.deps.push(dep) // \u540E\u7EED\u9700\u8981\u901A\u8FC7effect\u6765\u6E05\u7406\u7684\u65F6\u5019\u53EF\u4EE5\u53BB\u4F7F\u7528\n    }\n}\n            */\n          trackEffects(this.dep || (this.dep = new Set()))\n        }\n        if(this._dirty){//\u9ED8\u8BA4\u4E3A true\n          //\u53D6\u503C\u7684\u65F6\u5019\u6267\u884C\u7528\u6237\u4F20\u5165\u7684\u51FD\u6570\uFF0C\u5728run \u51FD\u6570\u5185\u90E8\u4F1A\u628A\u5F53\u524D\u7684 this \u8D4B\u503C\u5230 activeEffect \u4E0A\uFF0C\u90A3\u4E48\u5185\u90E8\u7684\u53D8\u91CF\u4F1A\u6536\u96C6\u8FD9\u4E2A\u8BA1\u7B97\u5C5E\u6027 effect\n          this._value = this.effect.run()//\u6267\u884C\u6B64\u65B9\u6CD5\u7684\u65F6\u5019\u5C06 this \u8D4B\u503C\u5230 activeEffect\n          this._dirty = false //\u5173\u95ED\u5F00\u5173\uFF0C\u5F00\u542F\u7F13\u5B58\n        }\n\n        return this._value //\u8FD4\u56DE\u7ED3\u679C\n    }\n\n    set value(newValue){\n       this.setter(newValue)//\u5B9A\u4E49\u4E86 setter \u7684\u60C5\u51B5\u4E0B\u4F20\u5165\u65B0\u503C\n    }\n}\nconst noop = () => { };\nexport function computed(getterOrOptions) {\n    //\u7528\u6237\u53EF\u80FD\u4F20\u5165\u4E00\u4E2A\u51FD\u6570\u6216\u8005\u4E00\u4E2A\u5BF9\u8C61\n    let onlyGetter = isFunction(getterOrOptions)\n    let getter;\n    let setter;\n    if (onlyGetter) {\n        //\u5982\u679C\u4F20\u5165\u4E86\u51FD\u6570\uFF0C\u90A3\u5C31\u8D4B\u503C\u5230 getter\n        getter = onlyGetter\n        setter = noop\n    } else {\n        //\u4F20\u5165\u5BF9\u8C61\u7684\u8BDD\n        getter = getterOrOptions.get\n        setter = getterOrOptions.set || noop\n    }\n\n    return new ComputedRefImpl(getter, setter)\n\n}", "import { reactive } from \"@vue/reactivity\";\n\n/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-06 17:54:42\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-06 18:06:05\n * @FilePath: /vue3-study/packages/runtime-core/src/componentProps.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nexport function initProps(instance: any,rawProps){\n    // props\u548C attrs \u662F\u4E92\u65A5\u7684\uFF0C\u4E00\u4E2A\u5C5E\u6027\u5982\u679C\u5728 props\u91CC\u9762\u51FA\u73B0\uFF0C\u90A3\u4E48 attrs \u91CC\u9762\u5C31\u6CA1\u6709\n    const props = {}\n    const attrs = {}\n    //vnode.type\u4E0A\u9762\u7684 props == propsOptions\n    const options = instance.propsOptions;\n    //\u4F20\u5165\u7684\u8FD9\u4E2A rawProps \u662Fvnode.props\u4E0A\u7684\n    //\u4E00\u4E2A\u662F vnode.props \u4E00\u4E2A\u662F vnode.type.props\u4E0A\n    if(rawProps){\n        for(let key in rawProps){//\u5FAA\u73AF vnode.Props\n            const value = rawProps[key]//\u53D6\u51FA\u6BCF\u4E00\u9879\n            if(key in options){ //vnode.type.Props\n            //   \u5982\u679C\u8FD9\u4E2A key \u662F\u5728vnode.type.Props\u91CC\u9762\u7684\n              //\u5C31\u662F props \u91CC\u9762\u7684\u989D\u5C5E\u6027\n              props[key] = value\n            }else{\n                //\u53CD\u4E4B\u5C31\u662F attrs \u91CC\u9762\u7684\n                attrs[key] = value\n            }\n        }\n    }\n     //\u6700\u540E\u5C06 props \u53D8\u6210\u54CD\u5E94\u5F0F\u7684\uFF0C\u653E\u5230\u7EC4\u4EF6\u5B9E\u4F8B\u5BF9\u8C61\u7684 props \u4E0A\uFF0C\n     //attrs \u4E5F\u653E\u4E0A\u53BB\n    instance.props = reactive(props); // \u539F\u5219\u4E0Aprops\u53EA\u9700\u8981\u7BA1\u7B2C\u4E00\u5C42\u5C31\u53EF\u4EE5\u4E86\n    instance.attrs = attrs;\n}", "import { reactive } from \"@vue/reactivity\";\nimport { hasOwn, isFunction, ShapeFlags } from \"@vue/shared\";\nimport { proxyRefs } from \"packages/reactivity/src/ref\";\nimport { initProps } from \"./componentProps\";\n\nexport let currentInstance; //\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684\u5B9E\u4F8B\n\n//\u521B\u5EFA\u4E00\u4E2A\u51FD\u6570\u53BB\u8BBE\u7F6E\u5F53\u524D\u7684\u7EC4\u4EF6\u5B9E\u4F8B\u4FDD\u5B58\u8D77\u6765\nexport function setCurrentInstance(instance){\n    currentInstance = instance;\n}\n\n//\u521B\u5EFA\u7EC4\u4EF6\u5B9E\u4F8B\nexport function createComponentInstance(vnode) {\n    const instance = {\n        data: null || {}, //\u9700\u8981\u5148\u7ED9\u4E2A\u9ED8\u8BA4\u5BF9\u8C61\uFF0C\u4E0D\u7136 null \u7684\u8BDD\u62A5\u9519\n        isMounted: false,\n        subTree: null,\n        vnode,\n        update: null,\n        props: {},\n        attrs: {},\n        propsOptions: vnode.type.props || {},\n        proxy: null,\n        setupState: null,\n        exopsed: {},\n        slots: {},\n    }\n\n    return instance;\n}\n\n//\u5728\u7EC4\u4EF6\u5B9E\u4F8B\u5BF9\u8C61\u4E0A\u65B0\u589E\u4E00\u4E2A proxy \u5BF9\u8C61\uFF0C\u5F53\u6211\u4EEC\u8BBF\u95EE\u5B9E\u4F8B\u5BF9\u8C61\u4E0A\u7684\uFF0C\nconst publicProperties = {\n    $attrs: (i) => i.attrs,\n    $props: (i) => i.props,\n    $slots: (i) => i.slots,\n};\nconst PublicInstancePropxyHandlers = {\n    get(target, key) {\n        //\u4ECE\u5B9E\u4F8B\u5BF9\u8C61\u4E0A\u62FF\u5230 data,props\n        let { data, props, setupState } = target\n        if (hasOwn(key, data)) {\n            //\u5F53\u6211\u4EEC\u8BBF\u95EE instance \u4E0A proxy \u7684\u5C5E\u6027\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u5148\u53BB\n            //data\u4E0A\u67E5\u627E\u6709\u6CA1\u6709\u8FD9\u4E2A key \u7684\uFF0C\u6709\u7684\u8BDD\uFF0C\u6211\u4EEC\u8FD4\u56DE data \u4E0A\u7684\n            return data[key];\n        } else if (hasOwn(key, props)) {\n            //\u5982\u679C data \u4E0A\u6CA1\u6709\uFF0C\u518D\u53BB props \u4E0A\u67E5\u627E\uFF0C\u6709\u7684\u8BDD\uFF0C\u8FD4\u56DE props \u4E0A\u7684\u503C\n            return props[key];\n        } else if (setupState && hasOwn(key, setupState)) {\n            return setupState[key];\n        }\n        //\u5C06$attrs,$props\u7EF4\u62A4\u5230\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5982\u679C\u53D6\u503C\u5C31\u4ECE\u5BF9\u8C61\u4E2D\u6267\u884C\u51FD\u6570\n        let getter = publicProperties[key];\n        if (getter) {\n            return getter(target);\n        }\n    },\n    set(target, key, value) {\n        //\u5F53\u6211\u4EEC\u8BBE\u7F6E\u503C\u7684\u65F6\u5019\uFF0C\u4E5F\u662F\u5148\u53BB\u4F18\u5148\u8BBE\u7F6E data\u4E0A\u7684\uFF0Cprops \u4E0A\u7684\u4E0D\u5141\u8BB8\u6539\uFF0C\u5F39\u51FA\u63D0\u9192\n        let { data, props, setupState } = target;\n        if (hasOwn(key, data)) {\n            data[key] = value;\n        } else if (hasOwn(key, props)) {\n            console.log(\"warn \");\n            return false;\n        } else if (setupState && hasOwn(key, setupState)) {\n            //\u589E\u52A0\u4ECE\u8FD9\u4E2A\u53D8\u91CF\u4E0A\u53D6\u503C\uFF0C\u8FD9\u662F setup\u5982\u679C\u8FD4\u56DE\u5BF9\u8C61\u7684\u8BDD\u8D4B\u503C\u5230\u8FD9\n            setupState[key] = value;\n        }\n        return true;\n    },\n}\nfunction initSlots(instance: any, children) {\n    if (instance.vnode.shapeFlag & ShapeFlags.SLOTS_CHILDREN) {\n        instance.slots = children; // \u5C06\u7528\u6237\u4F20\u9012\u7684\u63D2\u69FD\u7ED1\u5B9A\u5230\u5B9E\u4F8B\u4E0A\n    }\n}\nexport function setupComponent(instance) {\n    // \u7EC4\u4EF6\u7684\u5BF9\u8C61 render(component,{a:1})\n    const { type, props, children } = instance.vnode;\n    // \u7528\u7528\u6237\u4F20\u9012\u7684props \u548C \u628A\u4ED6\u89E3\u6790\u6210 attrs \u548C props\u653E\u5230\u5B9E\u4F8B\u4E0A\n    initProps(instance, props);\n    initSlots(instance, children)\n    instance.proxy = new Proxy(instance, PublicInstancePropxyHandlers)\n\n    //\u63A5\u4E0B\u6765\u5904\u7406 setUp\u51FD\u6570\n    let { setup } = type\n    if (setup) {\n        //\u5982\u679C\u5B58\u5728\u7684\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u6267\u884C\u7684\u4E0A\u4E0B\u6587\n        const setupContext = {\n            attrs: instance.attrs,\n            emit: (event, ...args) => {\n                //\u6211\u4EEC\u7528\u7684\u65F6\u5019\u7B2C\u4E00\u4E2A\u53C2\u6570\u6267\u884C\u7684\u65B9\u6CD5\u540D\u5B57 ctx.emit('myEvent')\n                //\u6211\u4EEC\u5904\u7406\u4E0B\u4E8B\u4EF6\u540D\u5B57\u5E26\u4E0A on\n                const eventName = `on${event[0].toUpperCase() + event.slice(1)}`;\n                //\u7F16\u8BD1\u540E\u7684\u4E8B\u4EF6\u4F1A\u5B58\u5728\u865A\u62DF\u8282\u70B9\u7684 props\u4E0A\uFF0C\u6211\u4EEC\u53D6\u51FA\u6765\uFF0C\u7136\u540E\u518D emit \u79CD\u8C03\u7528\uFF0C\u6240\u6709\uFF0C\u4E00\u65E6\u4F7F\u7528 emit \u5C31\u4F1A\u8C03\u7528\u7528\u6237\u4E8B\u4EF6\n                const handler = instance.vnode.props[eventName];\n                handler && handler(...args);\n            },\n            expose(exopsed) {//\u4F20\u5165\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u7136\u540E\u653E\u5230\u7EC4\u4EF6\u5B9E\u4F8B\u4E0A\u4E86\n                instance.exopsed = exopsed; // ref\u83B7\u53D6\u7EC4\u4EF6\u65F6\u62FF\u5230\u7684\u5C31\u662Fexposed\u5C5E\u6027\n            },\n        }\n        //\u5728\u8C03\u7528 setup \u51FD\u6570\u4E4B\u524D\u53BB\u53D6\u8D4B\u503C\u5F53\u524D\u7684\u7EC4\u4EF6\u5B9E\u4F8B\uFF0C\u8FD9\u6837\u5728 setup\u8C03\u7528\u7684\u65F6\u5019\u5C31\u53EF\u4EE5\u62FF\u5230\u5F53\u524D\u7684\u5B9E\u4F8B\n        setCurrentInstance(instance)\n\n        //\u8C03\u7528setup\u51FD\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u662Fprops\uFF0C\u7B2C\u4E8C\u4E2A\u662F \u6211\u4EEC\u4E0A\u9762\u521B\u5EFA\u7684\u6267\u884C\u4E0A\u4E0B\u6587\n        const setupResult = setup(instance.props, setupContext);\n\n        //\u7B49\u5230\u6267\u884C\u5B8C\u540E\u7F6E\u4E3A\u7A7A\n        setCurrentInstance(null)\n\n        // setup\u8FD4\u56DE\u7684\u662Frender\u51FD\u6570\n        if (isFunction(setupResult)) {\n            instance.render = setupResult;\n        } else {\n            // \u5C06\u8FD4\u56DE\u7ED3\u679C\u4F5C\u4E3A\u4E86\u6570\u636E\u6E90 \u5982\u679C\u975E\u51FD\u6570\u7684\u8BDD\u4F5C\u4E3A\u6570\u636E\u6E90\u5934\n            instance.setupState = proxyRefs(setupResult);\n        }\n    }\n    let data = type.data;\n    if (data) {\n        // vue2 \u4F20\u9012\u7684data\n        if (isFunction(data)) {\n            // \u7528\u6237\u5C06props \u8F6C\u6362\u6210\u4E86data\n            instance.data = reactive(data.call(instance.proxy));\n        }\n    }\n\n    if (!instance.render) {\n        instance.render = type.render; // \u5C06\u7528\u6237\u5199\u7684render\u4F5C\u4E3A\u5B9E\u529B\u7684render\u65B9\u6CD5\n    }\n}", "import { reactive } from \"@vue/reactivity\";\nimport { ShapeFlags, hasOwn } from \"@vue/shared\";\nimport { ReactiveEffect } from \"packages/reactivity/src/effect\";\nimport { initProps } from \"./componentProps\";\nimport { isSameVNode, Text, Fragment } from \"./vnode\";\nimport { queueJob } from \"./scheduler\"\nimport { createComponentInstance, setupComponent } from \"./component\";\nexport function createRenderer(options) {\n  const {\n    insert: hostInsert,\n    remove: hostRemove,\n    patchProp: hostPatchProp,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    setText: hostSetText,\n    setElementText: hostSetElementText,\n    parentNode: hostParentNode,\n    nextSibling: hostNextSibling,\n  } = options;\n  //\u6302\u8F7D\u5B50\u8282\u70B9\uFF0C\u5185\u90E8\u4E5F\u662F\u5FAA\u73AF\u8C03\u7528 patch\n  const mountChildren = (children, el) => {\n    for (let i = 0; i < children.length; i++) {\n      patch(null, children[i], el);\n    }\n  };\n  //\u5378\u8F7D\u5B50\u8282\u70B9\n  const unmountChildren = (children) => {\n    for (let i = 0; i < children.length; i++) {\n      unmount(children[i]);\n    }\n  };\n  const mountElement = (vnode, container, anchor) => {\n    const { type, props, children, shapeFlag } = vnode;\n    // \u521B\u5EFA\u5143\u7D20\n    const el = (vnode.el = hostCreateElement(type));\n    // \u589E\u6DFB\u5C5E\u6027\n    if (props) {\n      for (let key in props) {\n        hostPatchProp(el, key, null, props[key]);\n      }\n    }\n    // \u5904\u7406\u5B50\u8282\u70B9\n    if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n      mountChildren(children, el);\n    } else if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n      hostSetElementText(el, children);\n    }\n    hostInsert(el, container, anchor);\n  };\n\n  const patchProps = (oldProps, newProps, el) => {\n    if (oldProps !== newProps) {\n      for (let key in newProps) {\n        const prev = oldProps[key];\n        const next = newProps[key];\n        if (prev != next) {\n          // \u7528\u65B0\u7684\u6539\u6389\u8001\u7684\n          hostPatchProp(el, key, prev, next);\n        }\n      }\n      for (let key in oldProps) {\n        if (!(key in newProps)) {\n          // \u8001\u7684\u5B58\u5728\u7684\u65B0\u7684\u6CA1\u6709\u4E86\n          const prev = oldProps[key];\n          hostPatchProp(el, key, prev, null);\n        }\n      }\n    }\n  };\n  const patchKeyedChildren = (c1, c2, el) => {\n    // \u5168\u91CF\u7684diff\u7B97\u6CD5  \u6BD4\u5BF9\u8FC7\u7A0B\u662F\u6DF1\u5EA6\u904D\u5386\uFF0C\u5148\u904D\u5386\u7236\u4EB2 \u5728\u904D\u5386\u5B69\u5B50 \u4ECE\u7236-> \u5B50 \u90FD\u8981\u6BD4\u5BF9\u4E00\u904D\n    // \u76EE\u524D\u6CA1\u6709\u4F18\u5316\u6BD4\u5BF9\uFF0C\u6CA1\u6709\u5173\u5FC3 \u53EA\u6BD4\u5BF9\u53D8\u5316\u7684\u90E8\u5206 blockTree patchFlags\n    // \u540C\u7EA7\u6BD4\u5BF9 \u7236\u548C\u7236\u6BD4  \u5B50\u548C\u5B50\u6BD4  \u5B59\u5B50\u548C\u5B59\u5B50\u6BD4  \u91C7\u7528\u7684\u662F\u6DF1\u5EA6\u904D\u5386e\n\n    let i = 0; // \u9ED8\u8BA4\u4ECE0 \u5F00\u59CB\u6BD4\u5BF9\n\n    let e1 = c1.length - 1;\n    let e2 = c2.length - 1;\n\n    // i = 0, e1 = 2 , e2 = 3\n\n    // a b    e d\n    // a b c   e d\n    // \u4ECE\u5934\u5F00\u59CB\u6BD4\u8F83\n    while (i <= e1 && i <= e2) {\n      // \u5E76\u4E14\u662F\u4E00\u65B9\u4E0D\u6210\u529F\u5C31\u662Ffalse\n      const n1 = c1[i];\n      const n2 = c2[i];\n\n      if (isSameVNode(n1, n2)) {\n        patch(n1, n2, el); // \u6DF1\u5EA6\u904D\u5386\n      } else {\n        break;\n      }\n      i++;\n    }\n    // i = 2, e1 = 3 , e2 = 4\n    // \u4ECE\u5C3E\u90E8\u5F00\u59CB\u8FDB\u884C\u6BD4\u8F83\n    while (i <= e1 && i <= e2) {\n      const n1 = c1[e1];\n      const n2 = c2[e2];\n      if (isSameVNode(n1, n2)) {\n        patch(n1, n2, el); // \u6DF1\u5EA6\u904D\u5386\n      } else {\n        break;\n      }\n      e1--;\n      e2--;\n    }\n\n    // a b\n    // a b c d   i = 2  e1 = 1  e2 =3\n\n    //    a b\n    //d c a b    i = 0   e1= -1 e2 = 1\n\n    // \u6211\u8981\u77E5\u9053 \u6211\u662F\u6DFB\u52A0\u8FD8\u662F\u5220\u9664 \uFF1F i \u6BD4 e1 \u5927\u8BF4\u660E\u65B0\u7684\u957F\u8001\u7684\u77ED\n\n    // \u540C\u5E8F\u5217\u6302\u8F7D\n    if (i > e1) {\n      // \u6709\u65B0\u589E\n      if (i <= e2) {\n        while (i <= e2) {\n          // \u770B\u4E00\u4E0B \u5982\u679Ce2 \u5F80\u524D\u79FB\u52A8\u4E86\uFF0C\u90A3\u4E48e2 \u7684\u4E0B\u4E00\u4E2A\u503C\u80AF\u5B9A\u5B58\u5728\uFF0C\u610F\u5473\u7740\u5411\u524D\u63D2\u5165\n          // \u5982\u679Ce2 \u6CA1\u6709\u52A8 \u90A3\u4E48e2 \u4E0B\u4E00\u4E2A\u5C31\u662F\u7A7A\uFF0C\u610F\u5473\u7740\u662F\u5411\u540E\u63D2\u5165\n\n          const nextPos = e2 + 1;\n          // \u4FDD\u5B58\u4E4B\u524D\u7684e2\n          // vue2 \u662F\u770B\u4E0B\u4E00\u4E2A\u5143\u7D20\u5B58\u4E0D\u5B58\u5728\n          // vue3 \u662F\u770B\u4E0B\u4E00\u4E2A\u5143\u7D20\u7684\u957F\u5EA6 \u662F\u5426\u8D8A\u754C\n\n          const anchor = nextPos < c2.length ? c2[nextPos].el : null;\n          patch(null, c2[i], el, anchor); // \u6CA1\u6709\u5224\u65AD \u662F\u5411\u524D\u63D2\u5165\u8FD8\u662F\u5411\u540E\u63D2\u5165\uFF1F\n          i++;\n        }\n      }\n    }\n    // a b  c d\n    // a b      i = 2  e1 = 3  e2= 1\n    //  c d a b\n    //      a b   i=0     e1=1   e2=-1\n    else if (i > e2) { //i \u5982\u679C\u5927\u4E8Ee2\u8BF4\u660E\u6709\u5378\u8F7D\u7684\u60C5\u51B5\n      while (i <= e1) {\n        unmount(c1[i]);\n        i++;\n      }\n    }\n    // \u4EC0\u4E48\u60C5\u51B5\u662F\u8001\u7684\u591A \u65B0\u7684\u5C11\n\n    // a b c d e   f g\n    // a b e c d h f g\n\n    // c d e\n    // e c d h\n\n    //\u5269\u4E0B\u7684\u5C31\u662F\u65E0\u5E8F\u7684\u4E00\u7EC4\u533A\u95F4\u7684\u5BF9\u6BD4\n    let s1 = i; // s1 -> e1\n    let s2 = i; // s2 -> e2\n\n    // i =2  e1 =4   e2 = 5\n\n    // \u8FD9\u91CC\u6211\u4EEC\u8981\u590D\u7528\u8001\u8282\u70B9\uFF1F  key  vue2 \u4E2D\u6839\u636E\u8001\u8282\u70B9\u521B\u5EFA\u7684\u7D22\u5F15\u8868  vue3 \u4E2D\u6839\u636E\u65B0\u7684key \u505A\u4E86\u4E00\u4E2A\u6620\u5C04\u8868\n\n    const keyToNewIndexMap = new Map();\n    //\u5FAA\u73AF i \u5230e2 \u4E4B\u95F4\uFF0C\u8FD9\u4E2Ae2 \u662F\u65B0\u8282\u70B9\uFF0C\u751F\u6210\u4E00\u4E2A map \u6620\u5C04\u8BB0\u5F55\n    for (let i = s2; i <= e2; i++) { //\u5FAA\u73AF\u65B0\u7684\u865A\u62DF\u8282\u70B9\u4E2Di \u5230 e2 \u4E4B\u95F4\u7684\u8282\u70B9\uFF08\u8FD9\u4E2A\u65F6\u5019\u5934\u5C3E\u7684\u6BD4\u5BF9\u90FD\u8D70\u8FC7\u4E86\uFF09\n      const vnode = c2[i];  //\u62FF\u51FA\u865A\u62DF\u8282\u70B9\u7684 key \u548C\u4E0B\u6807\u53BB\u505A\u4E00\u4E2A\u6620\u5C04\n      keyToNewIndexMap.set(vnode.key, i);\n    }\n    // \u6709\u4E86\u65B0\u7684\u6620\u5C04\u8868\u540E\uFF0C\u53BB\u8001\u7684\u4E2D\u67E5\u627E\u4E00\u4E0B\uFF0C\u770B\u4E00\u4E0B\u662F\u5426\u5B58\u5728\uFF0C\u5982\u679C\u5B58\u5728\u9700\u8981\u590D\u7528\u4E86\n\n    // a b  c d e    f g\n    // a b  e c d h  f g\n\n    // h f\n    // d h f\n    // c d h f\n    // e c d h f\n    const toBePatched = e2 - s2 + 1; //\u8FD9\u4E2A\u662F\u5FAA\u73AF\u4E0B\u6765\u65E0\u6CD5\u6B63\u5E38\u6BD4\u5BF9\u65B0 vnode \u91CC\u9762\u8282\u70B9\u7684\u957F\u5EA6(\u62FF\u5230\u5E38\u89C4\u903B\u8F91\u65E0\u6CD5\u6BD4\u5BF9\u7684\u957F\u5EA6)\n    const newIndexToOldMapIndex = new Array(toBePatched).fill(0); // [0,0,0,0] \uFF08\u6839\u636E\u4E0A\u9762\u5E38\u89C4\u903B\u8F91\u65E0\u6CD5\u6BD4\u5BF9\u7684\u957F\u5EA6\u521B\u5EFA\u4E00\u4E2A\u90FD\u662F 0 \u7684\u6570\u7EC4\uFF09\n    for (let i = s1; i <= e1; i++) { //\u5FAA\u73AF\u65E0\u5E8F\u7684\u8001\u7684\u8282\u70B9\n      const child = c1[i];\n      let newIndex = keyToNewIndexMap.get(child.key); // \u901A\u8FC7\u8001\u7684key \u6765\u67E5\u627E\u5BF9\u5E94\u7684\u65B0\u7684\u7D22\u5F15\n      // \u5982\u679CnewIndex\u6709\u503C\u8BF4\u660E\u6709\n      if (newIndex == undefined) {\n        // \u8001\u7684\u91CC\u9762\u6709 \u65B0\u7684\u6CA1\u6709 \u90A3\u5C31\u53BB el \u4E0A\u5378\u8F7D\u6389\n        unmount(child);\n      } else {\n        // \u6BD4\u5BF9\u4E24\u4E2A\u5C5E\u6027\n        // \u5982\u679C\u524D\u540E\u4E24\u4E2A\u80FD\u590D\u7528\uFF0C\u5219\u6BD4\u8F83\u8FD9\u4E24\u4E2A\u8282\u70B9 \u8FD9\u4E2A newIndex \u5C31\u662F\u65B0\u8282\u70B9\u5728\u8001\u8282\u70B9\u67E5\u627E\u5230\u4E86\u7684\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u62FF\u5230\u5B58\u50A8\u7684\u65B0\u8282\u70B9\u6620\u5C04\u8868\u91CC\u9762\u65B0\u8282\u70B9\u7684\u4E0B\u6807\uFF0C\u51CF\u53BB s 2 \u5C31\u662F\u5B83\u5728\u65B0newIndexToOldMapIndex\u6570\u7EC4\u4ECE 0 \u5F00\u59CB\u5F80\u540E\u5BF9\u5E94\u7684\u4F4D\u7F6E\uFF0C\u5728\u8FD9\u4E2A\u4F4D\u7F6E\u5B58\u50A8\u4E0A\u80FD\u590D\u7528\u7684\u8001\u8282\u70B9\u7684\u4E0B\u6807 +1\n        newIndexToOldMapIndex[newIndex - s2] = i + 1; //newIndex \u662F\u5B58\u50A8\u7684\u4E0B\u6807\u503C\uFF0C\u4E0B\u6807\u51CF\u53BB s2 \u5C31\u662F\u51CF\u53BB\u5E38\u89C4\u6BD4\u5BF9\u7684\u7ED3\u675F\u7684\u4F4D\u7F6E\uFF0C\u5728\u65B0\u8282\u70B9\u5BF9\u5E94\u7684\u4F4D\u7F6E\u5B58\u50A8\u8001\u8282\u70B9+1//\u5728\u65B0\u8282\u70B9\u8F85\u52A9\u6570\u7EC4\u4E2D\uFF0C\u8BB0\u5F55\u4E0B\u8001\u7684\u4E0B\u6807+1\uFF0C\u4E4B\u6240\u4EE5\u52A0 1 \u662F\u56E0\u4E3A 0 \u7684\u8BDD\u6CA1\u6709\u610F\u4E49\uFF0C0 \u4EE3\u8868\u65B0\u589E\u7684\u8282\u70B9\n        patch(child, c2[newIndex], el); // \u8FD9\u4E2A\u5730\u65B9\u590D\u7528\u4E86\uFF0C\u63D2\u5165\u5230\u4E86\u771F\u5B9E\u8282\u70B9\u4E2D\n      }\n    }\n    // return\n    // \u5199\u5230\u8FD9\u91CC \u6211\u4EEC\u5DF2\u7ECF\u590D\u7528\u4E86\u8282\u70B9\uFF0C\u5E76\u4E14\u66F4\u65B0\u4E86\u590D\u7528\u8282\u70B9\u7684\u5C5E\u6027\uFF0C\u5DEE\u79FB\u52A8\u64CD\u4F5C\uFF0C\u548C\u65B0\u7684\u91CC\u9762\u6709\u8001\u7684\u4E2D\u6CA1\u6709\u7684\u64CD\u4F5C\n    // \u5982\u4F55\u77E5\u9053 \u65B0\u7684\u91CC\u9762\u6709 \u8001\u7684\u91CC\u9762\u6CA1\u6709 \uFF08\u8001\u7684\u6CA1\u6709\u6620\u5C04\u8868\uFF09\n\n    // [5, 3, 4, 0]  \u5BF9\u5E94\u7684\u4F4D\u7F6E\u5C31\u662F \u8001\u7D22\u5F15+1\n    // \u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u662F\u7528\u6765\u79FB\u52A8\u4F18\u5316\u7684\n    const seq = getSequence(newIndexToOldMapIndex);\n    //newIndexToOldMapIndex\u662F\u4E00\u4E2A\u6570\u7EC4\uFF0C\u503C\u662F\u80FD\u590D\u7528\u7684\u8001\u8282\u70B9\u7684\u4E0B\u6807+1\uFF0C\u6216\u8005 0\n    //\u8C03\u7528getSequence\u51FD\u6570\u540E\u8FD4\u56DE\u7684\u662F\u4E00\u4E2A\u4E0B\u6807\uFF0C\u8FD9\u4E2A\u4E0B\u6807\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u540E\uFF0C\u5E76\u8FFD\u6EAF\u540E\u7684\u4E0B\u6807\n    //seq[j]\u53D6\u5230\u7684\u662F\u4E0B\u6807\uFF0C\u8FD9\u4E2A\u4E0B\u6807\u662F\u7531newIndexToOldMapIndex\u53D8\u5316\u5F97\u5230\u7684\uFF0Cseq\u957F\u5EA6\u548C\u4E0B\u9762\u7684toBePatched\u4E00\u6837\n    //seq\u7684\u5B58\u50A8\u7684\u503C\u662F\u4E0B\u6807\uFF0C\u8FD9\u4E2A\u4E0B\u6807\u5176\u5B9E\u548C\u4E0B\u9762\u7684\u5FAA\u73AFtoBePatched i\u662F\u4E00\u6837\u7684\uFF0C\u4E0D\u8FC7 seq \u5B58\u50A8\u8FC7\u7684\u88AB\u6700\u957F\u9012\u589E\u7B97\u6CD5\u548C\u8FFD\u6EAF\u7B97\u6CD5\u5904\u7406\u8FC7\u4E86\n    let j = seq.length - 1; // \u83B7\u53D6seq\u6700\u540E\u7684\u7D22\u5F15\n    for (let i = toBePatched - 1; i >= 0; i--) {//i \u7684\u521D\u59CB\u503C\u662F\u65B0\u865A\u62DF dom \u7684\u6700\u540E\u4E00\u9879\n      //\u8FD9\u91CC\u7684s2 \u662F i\u8DF3\u51FA\u5FAA\u73AF\u7684\u7B2C\u4E00\u9879let s2 = i; // s2 -> e2\n      //s2 \u52A0\u4E0A    const toBePatched = e2 - s2 + 1  toBePatched\u662F\u4E71\u5E8F\u6BD4\u5BF9\u5143\u7D20\u7684\u957F\u5EA6 i\u662F\u957F\u5EA6\u51CF\u53BB 1\uFF0C\u8FD9\u65F6\u5019\u62FF\u5230\u4E71\u5E8F\u6BD4\u5BF9\u7684\u6700\u540E\u4E00\u9879\n      //\u4E5F\u5C31\u662F\u4E0B\u9762\u7684nextIndex\n      const nextIndex = s2 + i; // \u5FAA\u73AF\u7684\u9700\u8981\u5168\u91CF\u6BD4\u5BF9\u7684\u5F53\u524D\u9879 \u7684\u7D22\u5F15\uFF08\u4E5F\u5C31\u662F\u6700\u540E\u4E00\u9879\uFF0C\u5012\u5E8F\u63D2\u5165\u7684\uFF09//\u8FD9\u4E2A\u503C\u6839\u636E\u5FAA\u73AF\u4F1A\u4E00\u76F4\u53D8\u5316\uFF0C\u6240\u6709\u53EF\u4EE5\u66F4\u6362\u951A\u70B9\n      const nextChild = c2[nextIndex]; //\u6839\u636E\u7D22\u5F15\u53BB\u65B0\u8282\u70B9\u4E2D\u627E\u5230\u8FD9\u4E2A\u5143\u7D20 \u5148\u62FF\u5230\u7684h  \u6839\u636E\u6211\u4EEC\u4E0A\u9762\u8BF4\u7684\u9700\u8981\u4E71\u5E8F\u6BD4\u5BF9\u7684\u6700\u540E\u4E00\u9879\u7684\u7D22\u5F15\u53D6\u5230\u503C\n      // \u770B\u4E00\u4E0B h \u540E\u9762\u662F\u5426\u6709\u503C \uFF0C\u6709\u503C\u5C31\u5C06h \u63D2\u5165\u5230\u8FD9\u4E2A\u5143\u7D20\u7684\u524D\u9762\uFF0C\u6CA1\u6709\u503C\u5C31\u662FappendChild\n      const anchor = nextIndex + 1 < c2.length ? c2[nextIndex + 1].el : null; //\u770B\u4E0B\u4E71\u5E8F\u6BD4\u5BF9\u6700\u540E\u4E00\u9879\u540E\u9762\u662F\u5426\u6709\u503C\uFF0C\u6709\u503C\u7684\u8BDD\u90A3\u5C31\u62FF\u5230\u4F5C\u4E3A\u951A\u70B9\uFF0C\u6CA1\u6709\u7684\u8BDD\u8BF4\u660E\u4E71\u5E8F\u6BD4\u5BF9\u6700\u540E\u4E00\u9879\u5143\u7D20\u5C31\u662F\u6700\u540E\u4E00\u4E2A\u4E86\uFF0C\u951A\u70B9\u5C31\u662F null\uFF0C\u4F20\u5165\u7684\u8BDD\u5C31\u662F\u8FFD\u52A0\n      // \u9ED8\u8BA4\u627E\u5230f \u628A h \u63D2\u5165\u5230f\u524D\u9762\n      //   a b [e c d h] f g\n      if (newIndexToOldMapIndex[i] == 0) { //\u5982\u679C\u5F53\u524D\u5FAA\u73AF\u9879\u5728\u65B0\u503C\u6620\u5C04\u8868\u91CC\u9762\u503C\u662F 0\uFF0C\u8BF4\u660E\u6CA1\u6709\u80FD\u590D\u7528\u7684\uFF0C\u90A3\u6211\u4EEC\u5C31\u901A\u8FC7\u8C03\u7528 patch \u53BB\u521B\u5EFA\uFF0C\uFF08\u7B2C\u4E00\u4E2A\u53C2\u6570\u4F20\u7A7A\uFF0C\u8BF4\u660E\u662F\u65B0\u5EFA\uFF09\n        //   insert(child, parent, anchor) {\n        //insertBefore\u8FD9\u4E2A\u65B9\u6CD5\u662F\u79FB\u52A8\u6027\u7684     A B C D  -> A C B  D\n        // parent.insertBefore(child, anchor || null); \u4F1A\u53BB\u7236\u5143\u7D20\u4E2D\u627E\u5230\u8FD9\u4E2A\u951A\u70B9\u63D2\u5165\n        // },\n        patch(null, nextChild, el, anchor); // \u5C06h\u63D2\u5165\u5230 f\u524D\u9762\n        // \u627E\u5230\u65B0\u589E\u7684\u4E86\n        // \u521B\u5EFA\u5143\u7D20\u5728\u63D2\u5165\n      } else {\n        // \u76F4\u63A5\u505A\u63D2\u5165\u64CD\u4F5C\u5373\u53EF\n        //  \u5012\u5E8F\u63D2\u5165\n        //\u8FD9\u4E2A\u65B9\u6CD5\u4F1A\u79FB\u52A8\u8282\u70B9\u6BD4\u5982\u79FB\u52A8\u524D\u4F4D\u7F6E abcdehfg \uFF0C\u5B9E\u9645\u6211\u4EEC d \u9700\u8981\u79FB\u52A8\u5230h\u524D\u9762\uFF0C\n        //\u79FB\u52A8\u540E\u53D8\u6210 abcedhfg\uFF0C\u4E4B\u6240\u4EE5\u80FD\u79FB\u52A8\u662F\u56E0\u4E3A insertBefore\u8FD9\u4E2A\u65B9\u6CD5\u662F\u79FB\u52A8\u6027\u7684\n        // hostInsert(nextChild.el, el, anchor); // insert\u662F\u79FB\u52A8\u8282\u70B9 //\u5982\u679C\u503C\u4E0D\u4E3A 0 \u7684\u8BDD\uFF0C\u90A3\u5C31\u76F4\u63A5\u4EE5\u951A\u70B9\u4E3A\u57FA\u51C6\u53BB\u63D2\u5165\n        if (i !== seq[j]) {\n          hostInsert(nextChild.el, el, anchor); // insert\u662F\u79FB\u52A8\u8282\u70B9\n        } else {\n          //\u5982\u679C toBePatched\u7684\u4E0B\u6807\u548C seq \u5904\u7406\u8FC7\u7684\u5B58\u50A8\u7684\u4E0B\u6807\u503C\u4E00\u6837\u53EA\u662F seq \u5B58\u50A8\u7684\u4E0B\u6807\u503C\u987A\u5E8F\u662F\u6253\u4E71\u7684\uFF0C\u90A3\u5C31\u8DF3\u8FC7\n          //\u6362\u53E5\u8BDD\u8BF4\u5982\u679C seq \u7684\u503C\u5B8C\u5168\u548C toBePatched\u7684\u4E0B\u6807\u4E00\u6837\uFF0C\u90A3\u5C31\u4E0D\u7528\u5904\u7406\u4E86\uFF0C\u662F\u6700\u4F18\u89E3\uFF0C\u5982\u679C\u4E0D\u4E00\u6837\uFF0C\u90A3\u5C31\u4E00\u9879\u9879\u6BD4\u6709\u4E00\u6837\u7684\u5C31\u8DF3\u8FC7\n          j--; // \u4E0D\u505A\u79FB\u52A8\u8DF3\u8FC7\u8282\u70B9\u5373\u53EF\n        }\n        // \u8FD9\u4E2A\u63D2\u5165\u64CD\u4F5C\u6BD4\u8F83\u66B4\u5229\uFF0C \u6574\u4E2A\u505A\u4E86\u4E00\u6B21\u79FB\u52A8\uFF0C\u4F46\u662F\u6211\u4EEC\u9700\u8981\u4F18\u5316\u4E0D\u52A8\u7684\u90A3\u4E00\u9879\n        // [5, 3, 4, 0]  -\u300B [1,2] \u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\n        // \u7D22\u5F15\u4E3A 1 \u548C 2\u7684\u4E0D\u7528\u52A8\n\n        //  2 5 8 6 7 9    \u627E\u9012\u589E\u5E8F\u5217\u4E2D\u6700\u957F\u7684   2 5 6 7 9\n      }\n    }\n  }\n  const patchChildren = (n1, n2, el) => {\n    // \u6BD4\u8F83 \u4E24\u65B9\u5B69\u5B50\u7684\u5DEE\u5F02 \u66F4\u65B0el\u4E2D\u7684\u5B69\u5B50\n    const c1 = n1.children;\n    const c2 = n2.children;\n    const prevShapeFlag = n1.shapeFlag;\n    const shapeFlag = n2.shapeFlag;\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {//\u5982\u679C\u65B0\u8282\u70B9\u662F\u6587\u672C\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {//\u8001\u7684\u8282\u70B9\u662F\u6570\u7EC4\n        unmountChildren(c1); //\u90A3\u5C31\u5C06\u8001\u7684\u8282\u70B9\u5378\u8F7D\n      }\n      if (c1 !== c2) { //\u5982\u679C\u65B0\u7684\u662F\u6587\u672C\uFF0C\u8001\u8282\u70B9\u4E5F\u662F\u6587\u672C\uFF0C\u5185\u5BB9\u4E0D\u540C\u90A3\u5C31\u91CD\u65B0\u63D2\u5165\u6587\u672C\n        // \u6587\u672C\u5185\u5BB9\u4E0D\u76F8\u540C\n        hostSetElementText(el, c2);\n      }\n    } else {\n      // \u8001\u513F\u5B50\u662F\u6570\u7EC4, \u65B0\u7684\u662F\u6570\u7EC4\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n          console.log('\u65B0\u8001\u90FD\u662F\u513F\u5B50\u6BD4\u5BF9');\n\n          // diff\u7B97\u6CD5\n          patchKeyedChildren(c1, c2, el);\n        } else { //\u65B0\u7684\u4E0D\u662F\u6570\u7EC4\n          // \u8001\u7684\u662F\u6570\u7EC4  \u65B0\u7684\u4E0D\u662F\u6570\u7EC4.\u5220\u9664\u6765\u7684\n          unmountChildren(c1);\n        }\n      } else {\n        if (prevShapeFlag & ShapeFlags.TEXT_CHILDREN) {\n          hostSetElementText(el, \"\");\n        }\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n          mountChildren(c2, el);\n        }\n      }\n    }\n  };\n  const patchElement = (n1, n2) => {\n    // \u6BD4\u5BF9n1 \u548C n2\u7684\u5C5E\u6027\u5DEE\u5F02\n    let el = (n2.el = n1.el);\n    const oldProps = n1.props || {};\n\n    const newProps = n2.props || {};\n\n    patchProps(oldProps, newProps, el);\n\n    patchChildren(n1, n2, el);\n  };\n\n  const processElement = (n1, n2, container, anchor) => {\n    if (n1 == null) {\n      // \u521D\u6B21\u6E32\u67D3\n      mountElement(n2, container, anchor);\n    } else {\n      // diff\u7B97\u6CD5 \u5728\u6BD4\u5BF9\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u90FD\u4F1A\u590D\u7528\u51FA\u6E32\u67D3\u521B\u5EFA\u7684\u771F\u5B9E el\uFF0C\u7ED9n2\uFF0C\u6240\u6709 diff \u7684\u65F6\u5019\u90FD\u662F\u53BB\u8FD9\u4E2A\u590D\u7528\u7684\u8282\u70B9\u4E0A\u53BB\u64CD\u4F5C\u7684\n\n      patchElement(n1, n2);\n    }\n  };\n  const processText = (n1, n2, el) => {\n    if (n1 == null) {\n      //\u521D\u6B21\u6E32\u67D3\u6587\u672C\u8282\u70B9,\u90A3\u5C31\u521B\u5EFA\u8282\u70B9\u653E\u5230 n2 \u7684 el \u4E0A\u53BB\u8BB0\u5F55\u4E0A\uFF0C\u5E76\u4E14\u63D2\u5165\u5230\u771F\u5B9E\u8282\u70B9\n      hostInsert(n2.el = hostCreateText(n2.children), el);\n    } else {\n      let el = (n2.el = n1.el) //\u56E0\u4E3A\u8FD9\u4E2A\u65B9\u6CD5\u90FD\u662F\u5904\u7406\u6587\u672C\u8282\u70B9\uFF0C\u6211\u4EEC\u53EF\u4EE5\u590D\u7528\u8001\u7684\u771F\u5B9E\u8282\u70B9\n      //\u7136\u540E\u53BB\u66F4\u65B0Text\u6587\u672C\u7684\u503C\uFF0C\u8FD9\u4E2A\u503C\u662F\u5B58\u5728 children \u4E0A\u7684\n      if (n1.children !== n2.children) {\n        //\u6587\u672C\u503C\u4E0D\u4E00\u6837\u7684\u8BDD\uFF0C\u90A3\u5C31\u65B0\u5EFA\u53BB\u63D2\u5165\n        hostSetText(el, n2.children)\n      }\n    }\n  }\n\n  const processFragment = (n1, n2, el) => {\n    if (n1 == null) {\n      //\u521D\u59CB\u5316\u8C03\u7528 mountChildren,\u5185\u90E8\u662F\u8C03\u7528 patch \u65B9\u6CD5\uFF0C\n      /**\n      * @description \u63CF\u8FF0\n  const mountChildren = (children, el) => {\n    for (let i = 0; i < children.length; i++) {\n      patch(null, children[i], el);\n    }\n  };\n      */\n      mountChildren(n2.children, el)\n    } else { //\u5982\u679Cn1 \u548Cn2\u90FD\u6709\u503C\uFF0C\u90A3\u5C31\u76F8\u5F53\u4E8E\u662F\u6BD4\u8F83\u53CC\u65B9\u7684 children \u8282\u70B9\n      patchKeyedChildren(n1.children, n2.children, el)\n    }\n  }\n\n  //\u5728\u66F4\u65B0\u7EC4\u4EF6\u7684\u65F6\u5019\uFF0C\u5982\u679C\u9700\u8981\u66F4\u65B0 props\n  const updateProps = (prevProps, nextProps) => {\n    for (let key in nextProps) {\n      //\u5FAA\u73AF\u65B0\u5C5E\u6027\uFF0C\u5C06\u65B0\u5C5E\u6027\u7684\u6BCF\u4E2A key \u90FD\u8BBE\u7F6E\u5230\u65E7\u5C5E\u6027\u4E2D\uFF0C\u76F8\u540C\u7684\u4F1A\u8986\u76D6\n      prevProps[key] = nextProps[key]\n    }\n    //\u5FAA\u73AF\u8001\u7684\u5C5E\u6027\uFF0C\u5982\u679C\u4E0D\u5728\u65B0\u7684\u91CC\u9762\u5C31\u5220\u9664\n    for (let key in prevProps) {\n      if (!(key in nextProps)) {\n        delete prevProps[key]\n      }\n    }\n  }\n\n  //\u8FD9\u4E2A\u65B9\u6CD5\u662F\u5904\u7406\u66F4\u65B0\u7684\n  const updateComponentPreRender = (instance, next) => {\n    //\u786E\u8BA4\u9700\u8981\u66F4\u65B0\u7684\u60C5\u51B5\u4E0B\uFF0C\u5C06\u4FDD\u5B58\u7684 next \u6E05\u7A7A\uFF0C\u4E3A\u4E0B\u6B21\u7559\u4F4D\u7F6E\n    instance.next = null\n    instance.vnode = next  // \u7528\u65B0\u7684\u865A\u62DF\u8282\u70B9 \u6362\u6389\u8001\u7684\u865A\u62DF\u8282\u70B9\n    //\u66F4\u65B0\u4E0B\u5C5E\u6027\n    updateProps(instance.props, next.props)\n\n        // \u63D2\u69FD\u66F4\u65B0\n    // \u5C06\u65B0\u7684children \u5408\u5E76\u5230\u63D2\u69FD\u4E2D\n    instance.slots = next.children; // \u76F4\u63A5\u7528\u5B69\u5B50\u3001\u66FF\u6362\u6389\u63D2\u69FD\n  }\n  const setupRenderEffect = (instance, container, anchor) => {\n    const { render } = instance;\n    //\u63A5\u4E0B\u6765\u5B9A\u4E49\u4E00\u4E2A\u51FD\u6570\uFF0C\u8FD9\u4E2A\u51FD\u6570\u5C31\u662F\u6211\u4EEC\u521B\u5EFA\u7EC4\u4EF6 effect \u4F20\u5165\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\n    //\u4E5F\u5C31\u662F effect.run()\u6267\u884C\u7684\n    const componentFn = () => {\n      if (!instance.isMounted) {\n        debugger\n        // \u8FD9\u91CC\u4F1A\u505A\u4F9D\u8D56\u6536\u96C6\uFF0C\u6570\u636E\u53D8\u5316\u4F1A\u518D\u6B21\u8C03\u7528effect\n        //\u5F97\u5230\u7EC4\u4EF6\u7684\u8282\u70B9\u6811\n        const subTree = render.call(instance.proxy, instance.proxy);\n        //\u7136\u540E\u901A\u8FC7 patch \u5C06\u7EC4\u4EF6\u5185\u90E8\u7684\u8282\u70B9\u6811\u53D8\u6210\u771F\u5B9E\u7684\u8282\u70B9\n        patch(null, subTree, container, anchor);\n        //\u5C06\u7B2C\u4E00\u6B21\u6E32\u67D3\u7684\u8282\u70B9\u6811\u4FDD\u5B58\u8D77\u6765\n        instance.subTree = subTree; // \u7B2C\u4E00\u6B21\u6E32\u67D3\u4EA7\u751F\u7684vnode\n        //\u6807\u8BC6\u4E0B\u5DF2\u7ECF\u6302\u8F7D\u8FC7\n        instance.isMounted = true;\n      } else {\n        //\u5DF2\u7ECF\u6302\u8F7D\u8FC7\u66F4\u65B0\u7684\u60C5\u51B5\n        //\u62FF\u5230\u65B0\u7684\u8282\u70B9\u6811\u865A\u62DF dom\n        //\u6211\u4EEC\u53EF\u4EE5\u5728\u8FD9\u901A\u8FC7 next \u662F\u5426\u6709\u503C\uFF0C\u53BB\u5224\u65AD\u662F\u5426\u9700\u8981\u66F4\u65B0\n        let { next } = instance;\n        if (next) {\n          // \u5982\u679C\u6709next \u8BF4\u660E \u5C5E\u6027\u6216\u8005\u63D2\u69FD \u66F4\u65B0\u4E86\n          updateComponentPreRender(instance, next);\n        }\n        // \u7EC4\u4EF6\u7684\u66F4\u65B0\u4F1A\u6267\u884C\u7EC4\u4EF6\u7684 render \u51FD\u6570\u62FF\u5230\u65B0\u7684\u865A\u62DF dom \u6570\u636E\u7ED3\u6784\n        const subTree = render.call(instance.proxy, instance.proxy); // \u8FD9\u91CC\u4E5F\u66F4\u65B0\u4E86\uFF1F\n        //\u8FDB\u884C patch \u66F4\u65B0\n        patch(instance.subTree, subTree, container, anchor);\n        //\u4FDD\u5B58\u8FD9\u4E00\u6B21\u7684\u865A\u62DF\u8282\u70B9\u6811\n        instance.subTree = subTree;\n      }\n    }\n    //\u751F\u6210\u4E00\u4E2A\u7EC4\u4EF6 effect,\u7B2C\u4E8C\u4E2A\u53C2\u6570\u76F8\u5F53\u4E8E scheduler,c\n    //\u521D\u6B21\u6267\u884C render \u540E\u91CC\u9762\u7684\u53D8\u91CF\u6536\u96C6\u4E86\u8FD9\u4E2A\u7EC4\u4EF6 effect\n    //\u5F53\u53D8\u91CF\u7684\u503C\u6539\u53D8\u7684\u65F6\u5019\uFF0C\u5C31\u4F1A\u89E6\u53D1\u66F4\u65B0 effect\uFF0C\n    //\u6709 scheduler\u7684\u8BDD\u4F1A\u6267\u884C scheduler\n    //\u8FD9\u4E2A\u65F6\u5019\u5982\u679C\u9891\u7E41\u66F4\u65B0\uFF0C\u5C06\u4F1A\u591A\u6B21\u6267\u884Cscheduler\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5C31\u9700\u8981\u5F02\u6B65\u66F4\u65B0\n    const effect = new ReactiveEffect(componentFn, () => {\n      // \u6211\u9700\u8981\u505A\u5F02\u6B65\u66F4\u65B0\n      queueJob(instance.update);\n    });\n    //\u5C06 effect\u7684 run \u65B9\u6CD5\u7ED1\u5B9A\u5230 effect \u4E0A\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684\u8FD4\u56DE\uFF0C\u53BB\u8C03\u7528\u6267\u884C\n    const update = (instance.update = effect.run.bind(effect));\n    update(); // \u5F3A\u5236\u66F4\u65B0\n  }\n  const mountComponent = (vnode, container, anchor) => {\n    //\u7B2C\u4E00\u6B65 \u521B\u5EFA\u7EC4\u4EF6\u5B9E\u4F8B1\n    const instance = (vnode.component = createComponentInstance(vnode)); // \u8BA9\u865A\u62DF\u8282\u70B9\u77E5\u9053\u5BF9\u5E94\u7684\u7EC4\u4EF6\u662F\u8C01\n    //\u7B2C\u4E8C\u6B65\u7ED9\u5B9E\u4F8B\u8D4B\u4E88\u5C5E\u6027\n    setupComponent(instance)\n    //\u7B2C\u4E09\u6B65\u521B\u5EFA\u7EC4\u4EF6\u7684 effect\n    setupRenderEffect(instance, container, anchor);\n    // \u5982\u4F55\u6302\u8F7D\u7EC4\u4EF6\uFF1F  vnode \u6307\u4EE3\u7684\u662F\u7EC4\u4EF6\u7684\u865A\u62DF\u8282\u70B9  subTree render\u51FD\u6570\u8FD4\u56DE\u7684\u865A\u62DF\u8282\u70B9\n    //\u7EC4\u4EF6\u865A\u62DF\u8282\u70B9\u7684 type \u4E0A\u6709 render,props\u7B49\u914D\u7F6E\u4FE1\u606F\n    // const { data = () => ({}), render, props: propsOptions = {} } = vnode.type;\n    // const state = reactive(data()); // \u5C06\u6570\u636E\u53D8\u6210\u54CD\u5E94\u5F0F\u7684\n    //\u5B9A\u4E49\u4E00\u4E2A\u5BF9\u8C61\u4EE3\u8868\u7EC4\u4EF6\u5B9E\u4F8B\u7684\u5BF9\u8C61\n    // const instance = {\n    //   // \u7EC4\u4EF6\u7684\u5B9E\u4F8B\n    //   data: state,\n    //   isMounted: false,\n    //   subTree: null,\n    //   vnode,\n    //   update: null, // \u7EC4\u4EF6\u7684\u66F4\u65B0\u65B9\u6CD5 effect.run()\n    //   props: {},\n    //   attrs: {},\n    //   propsOptions,\n    //   proxy: null,\n    // };\n    //\u7EC4\u4EF6\u7684\u865A\u62DF\u8282\u70B9\u4E0A\u589E\u52A0 component \u5C5E\u6027\uFF0C\u8BB0\u4F4F\u5F53\u524D\u7684\u7EC4\u4EF6\u5B9E\u4F8B\n    // vnode.component = instance; // \u8BA9\u865A\u62DF\u8282\u70B9\u77E5\u9053\u5BF9\u5E94\u7684\u7EC4\u4EF6\u662F\u8C01\n    //\u521D\u59CB\u5316 props\n    // instance.propsOptions \u7528\u6237\u63A5\u53D7\u4E86\u54EA\u4E9B\u5C5E\u6027\u7684\u5217\u8868 \uFF0C  vnode.props\n    // initProps(instance, vnode.props);\n    //\u5728\u7EC4\u4EF6\u5B9E\u4F8B\u5BF9\u8C61\u4E0A\u65B0\u589E\u4E00\u4E2A proxy \u5BF9\u8C61\uFF0C\u5F53\u6211\u4EEC\u8BBF\u95EE\u5B9E\u4F8B\u5BF9\u8C61\u4E0A\u7684\uFF0C\n    // const publicProperties = {\n    //   $attrs: (i) => i.attrs,\n    //   $props: (i) => i.props,\n    // };\n    //data \u6216\u8005 props \u91CC\u9762\u7684\u503C\u7684\u65F6\u5019\uFF0C\u5EFA\u8BAE\u4E00\u4E2A\u6620\u5C04\u8FD4\u56DE\u5173\u7CFB\n    // instance.proxy = new Proxy(instance, {\n    //   get(target, key) {\n    //     //\u4ECE\u5B9E\u4F8B\u5BF9\u8C61\u4E0A\u62FF\u5230 data,props\n    //     let { data, props } = target\n    //     if (hasOwn(key, data)) {\n    //       //\u5F53\u6211\u4EEC\u8BBF\u95EE instance \u4E0A proxy \u7684\u5C5E\u6027\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u5148\u53BB\n    //       //data\u4E0A\u67E5\u627E\u6709\u6CA1\u6709\u8FD9\u4E2A key \u7684\uFF0C\u6709\u7684\u8BDD\uFF0C\u6211\u4EEC\u8FD4\u56DE data \u4E0A\u7684\n    //       return data[key];\n    //     } else if (hasOwn(key, props)) {\n    //       //\u5982\u679C data \u4E0A\u6CA1\u6709\uFF0C\u518D\u53BB props \u4E0A\u67E5\u627E\uFF0C\u6709\u7684\u8BDD\uFF0C\u8FD4\u56DE props \u4E0A\u7684\u503C\n    //       return props[key];\n    //     }\n    //     //\u5C06$attrs,$props\u7EF4\u62A4\u5230\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5982\u679C\u53D6\u503C\u5C31\u4ECE\u5BF9\u8C61\u4E2D\u6267\u884C\u51FD\u6570\n    //     let getter = publicProperties[key];\n    //     if (getter) {\n    //       return getter(target);\n    //     }\n    //   },\n    //   set(target, key, value) {\n    //     //\u5F53\u6211\u4EEC\u8BBE\u7F6E\u503C\u7684\u65F6\u5019\uFF0C\u4E5F\u662F\u5148\u53BB\u4F18\u5148\u8BBE\u7F6E data\u4E0A\u7684\uFF0Cprops \u4E0A\u7684\u4E0D\u5141\u8BB8\u6539\uFF0C\u5F39\u51FA\u63D0\u9192\n    //     let { data, props } = target;\n    //     if (hasOwn(key, data)) {\n    //       data[key] = value;\n    //     } else if (hasOwn(key, props)) {\n    //       console.log(\"warn \");\n    //       return false;\n    //     }\n    //     return true;\n    //   },\n    // })\n\n\n  }\n\n  //\u8FD9\u91CC\u53EA\u662F\u5BF9\u6BD4\u4E86\u5C5E\u6027\u6709\u53D8\u5316\uFF0C\u5B9E\u9645\u6211\u4EEC\u8FD8\u9700\u8981\u628A\u53D8\u5316\u7684\u90E8\u5206\u64CD\u4F5C\u6389\uFF0C\u4E5F\u5C31\u662F\u5199\u4E00\u4E2A updateProps \u65B9\u6CD5\n  const hasPropsChanged = (prevProps = {}, nextProps = {}) => {\n    //\u53D6\u51FA\u4E24\u4E2A props \u7684\u5C5E\u6027\uFF0C\u62FC\u6210\u5C5E\u6027\n    let l1 = Object.keys(prevProps)\n    let l2 = Object.keys(nextProps)\n    if (l1.length !== l2.length) {\n      return true\n    }\n    //\u5FAA\u73AF\u8001\u7684 props\u7684 key\uFF0C\u540C\u65F6\u53BB\u65B0\u7684 props \u91CC\u9762\u53D6\n    for (let i = 0; i < l1.length; i++) {\n      const key = l2[i];\n      if (nextProps[key] !== prevProps[key]) {\n        return true; // \u5C5E\u6027\u6709\u53D8\u5316\n      }\n    }\n    return false\n  }\n  //\u5224\u65AD\u7EC4\u4EF6\u662F\u5426\u9700\u8981\u66F4\u65B0\n  const shouldComponentUpdate = (n1, n2) => {\n    const { props: prevProps, children: prevChildren } = n1;\n    const { props: nextProps, children: nextChildren } = n2;\n    // \u5BF9\u4E8E\u63D2\u69FD\u800C\u8A00 \u53EA\u8981\u524D\u540E\u6709\u63D2\u69FD \u90A3\u4E48\u5C31\u610F\u5473\u7740\u7EC4\u4EF6\u8981\u66F4\u65B0\n    if (prevChildren || nextChildren) return true;\n    //\u5982\u679C props \u4E00\u6837\u4E0D\u66F4\u65B0\n    if (prevProps === nextProps) return false;\n    return hasPropsChanged(prevProps, nextProps);\n  }\n  //\u66F4\u65B0\u7EC4\u4EF6\n  const updateComponent = (n1, n2) => {\n    //\u66F4\u65B0\u5C5E\u6027\u7684\u65F6\u5019\u5148\u590D\u7528\u7EC4\u4EF6\n    let instance = (n2.component = n1.component)\n    if (shouldComponentUpdate(n1, n2)) {//\u5982\u679C\u9700\u8981\u66F4\u65B0\uFF0C\u6211\u4EEC\u5C31\u91CD\u65B0\u8C03\u7528 run \u65B9\u6CD5\n      // \u6BD4\u5BF9\u5C5E\u6027 \u548C \u63D2\u69FD \u770B\u4E00\u4E0B\u8981\u4E0D\u8981\u66F4\u65B0\n      instance.next = n2; // \u6211\u4EEC\u5C06\u65B0\u7684\u865A\u62DF\u8282\u70B9\u6302\u8F7D\u5230\u5B9E\u4F8B\u4E0A\n      instance.update();//\u8FD9\u7684 update \u5C31\u662F effect.run\u65B9\u6CD5 1\n    }\n  }\n  const processComponent = (n1, n2, container, anchor = null) => {\n    if (n1 === null) {\n      //\u6211\u4EEC\u5728\u521D\u59CB\u5316\u7EC4\u4EF6\u7684\u65F6\u5019\uFF0C\u5206\u4E3A\u51FA\u6E32\u67D3\n      mountComponent(n2, container, anchor)\n    } else {\n      // \u66F4\u65B0\n      // \u7EC4\u4EF6\u66F4\u65B0  \u6307\u4EE3\u7684\u662F\u7EC4\u4EF6\u7684\u5C5E\u6027 \u66F4\u65B0\u3001\u63D2\u69FD\u66F4\u65B0,render\u7684\u66F4\u65B0\u5DF2\u7ECF\u5728 proxy \u4E2D\u81EA\u52A8\u89E6\u53D1\u4E86\n      // let instance = (n2.component = n1.component);\n      // instance.props.a = n2.props.a;\n      //\u7EC4\u4EF6\u66F4\u65B0\u7684\u65F6\u5019\u53BB\u66F4\u65B0\u5C5E\u6027\n      debugger\n      updateComponent(n1, n2)\n    }\n\n  }\n  const patch = (n1, n2, container, anchor = null) => {\n    if (n1 == n2) {\n      return; // \u65E0\u9700\u66F4\u65B0\n    }\n    // n1 div -\u300B n2 p\n\n    // \u5982\u679C  n1 n2 \u90FD\u6709\u503C \u4F46\u662F\u7C7B\u578B\u4E0D\u540C\u5219\u5220\u9664n1 \u6362n2\n    if (n1 && !isSameVNode(n1, n2)) {\n      unmount(n1); // \u5220\u9664\u8282\u70B9\n      n1 = null;\n    }\n    let { shapeFlag, type } = n2\n    switch (type) {\n      case Text:\n        //\u5904\u7406\u6587\u672C\u6D88\u606F\n        processText(n1, n2, container)\n        break;\n      case Fragment:\n        processFragment(n1, n2, container)\n        break\n      default:\n        if (shapeFlag & ShapeFlags.ELEMENT) {\n          //\u5904\u7406\u5143\u7D20\u8282\u70B9\n          processElement(n1, n2, container, anchor);\n        } else if (shapeFlag & ShapeFlags.COMPONENT) {\n          //\u5904\u7406\u7EC4\u4EF6\u8282\u70B9\n          processComponent(n1, n2, container, anchor);\n        }\n    }\n\n    // ...\n  };\n  const unmount = (vnode) => {\n    // fragment\u5378\u8F7D\u7684\u65F6\u5019  \u4E0D\u662F\u5378\u8F7D\u7684\u81EA\u5DF1\uFF0C\u800C\u662F\u4ED6\u6240\u6709\u7684\u513F\u5B50\n    if (vnode.type === Fragment) {\n      return unmountChildren(vnode.children);\n    }\n    hostRemove(vnode.el)\n  };\n  const render = (vnode, container) => {\n    debugger\n    if (vnode == null) {\n      // \u5378\u8F7D\uFF1A\u5220\u9664\u8282\u70B9\n\n      if (container._vnode) {\n        // \u8BF4\u660E\u6E32\u67D3\u8FC7\u4E86\uFF0C\u6211\u624D\u9700\u8981\u8FDB\u884C\u5378\u8F7D\u64CD\u4F5C\n        unmount(container._vnode);\n      }\n    } else {\n      // \u521D\u6B21\u6E32\u67D3  \u66F4\u65B0\n\n      patch(container._vnode || null, vnode, container);\n    }\n    container._vnode = vnode; // \u7B2C\u4E00\u6B21\u6E32\u67D3\u4FDD\u5B58\u865A\u62DF\u8282\u70B9\n  };\n  return {\n    // createRenderer \u53EF\u4EE5\u7528\u6237\u81EA\u5B9A\u4E49\u6E32\u67D3\u65B9\u5F0F\n    // createRenderer \u8FD4\u56DE\u7684render\u65B9\u6CD5 \u63A5\u53D7\u53C2\u6570\u662F\u865A\u62DF\u8282\u70B9\u548C\u5BB9\u5668\n    render,\n  };\n}\n\n\n// \u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\n// \u6700\u4F18\u7684\u60C5\u51B5 [1,2,3,4,5,6]  -> [0,1,2,3,4,5]\n\nfunction getSequence(arr) {\n  let len = arr.length; // \u603B\u957F\u5EA6\n  let result = [0]; // \u9ED8\u8BA4\u8FDE\u7EED\u7684\u6700\u7EC8\u7ED3\u679C \u7EC4\u6210\u7684\u7D22\u5F15\n  let resultLastIndex;\n  let start;\n  let end;\n  let middle;\n  let p = arr.slice(0); // \u7528\u6765\u6807\u8BC6\u7D22\u5F15\u7684\n  for (let i = 0; i < len; i++) {\n    const arrI = arr[i];\n    if (arrI !== 0) {\n      // vue \u4E2D\u5E8F\u5217\u4E2D\u4E0D\u4F1A\u51FA\u73B00  \u5982\u679C\u5E8F\u5217\u4E2D\u51FA\u73B0 0 \u7684\u8BDD\u5FFD\u7565\u5C31\u53EF\u4EE5\n      resultLastIndex = result[result.length - 1];\n      if (arr[resultLastIndex] < arrI) {\n        result.push(i);\n        p[i] = resultLastIndex; // \u8BA9\u5F53\u524D\u6700\u540E\u4E00\u9879\u8BB0\u4F4F\u524D\u4E00\u9879\u7684\u7D22\u5F15\n        continue;\n      }\n      // [1,2,3,4,5,6]\n      // \u8FD9\u91CC\u5C31\u4F1A\u51FA\u73B0 \u5F53\u524D\u9879\u6BD4\u6700\u540E\u4E00\u9879\u7684\u503C\u5927  [0,1,2]\n      start = 0;\n      end = result.length - 1;\n      while (start < end) {\n        middle = ((start + end) / 2) | 0;\n        if (arr[result[middle]] < arrI) {\n          start = middle + 1;\n        } else {\n          end = middle;\n        }\n      }\n      // middle \u5C31\u662F\u7B2C\u4E00\u4E2A\u6BD4\u5F53\u524D\u503C\u5927\u7684\u503C\n      if (arrI < arr[result[start]]) {\n        p[i] = result[start - 1]; // \u8BB0\u4F4F\u6362\u7684\u90A3\u4E2A\u4EBA\u7684\u524D\u4E00\u9879\u7684\u7D22\u5F15\n        result[start] = i;\n      }\n    }\n  }\n  // \u8FFD\u6EAF\n  let i = result.length; // \u83B7\u53D6\u6570\u7EC4\u957F\u5EA6\n  let last = result[i - 1]; // \u6700\u540E\u4E00\u9879\u7684\u7D22\u5F15\n  while (i-- > 0) {\n    result[i] = last; // \u7528\u6700\u540E\u4E00\u9879\u7684\u7D22\u5F15\u6765\u8FFD\u6EAF\n    last = p[last]; // \u7528p\u4E2D\u7684\u7D22\u5F15\u6765\u8FDB\u884C\u8FFD\u6EAF\n  }\n  return result;\n}\n\n\n", "/*\n * @Author: qwh 15806293089@163.com\n * @Date: 2022-11-02 09:37:57\n * @LastEditors: qwh 15806293089@163.com\n * @LastEditTime: 2022-11-09 16:16:03\n * @FilePath: /vue3-study/packages/runtime-dom/src/index.ts\n * @Description: \u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E,\u8BF7\u8BBE\u7F6E`customMade`, \u6253\u5F00koroFileHeader\u67E5\u770B\u914D\u7F6E \u8FDB\u884C\u8BBE\u7F6E: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nimport { nodeOps } from \"./nodeOps\";//\n\nimport { patchProp } from \"./pathProp\";\nimport { createRenderer } from \"@vue/runtime-core\";\n\nconst renderOptions = Object.assign(nodeOps, { patchProp })\n\nexport const render = (vnode, container) => {\n    return createRenderer(renderOptions).render(vnode, container);\n  };\n  export * from \"@vue/runtime-core\";\n  export * from \"@vue/reactivity\";"],
  "mappings": "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",
  "names": ["ShapeFlags", "ref", "ReactiveFlags", "type", "job", "i", "el", "render"]
}
